<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Monitoring System - Help & Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        .header p {
            color: #7f8c8d;
            margin-top: 0.5rem;
        }
        
        .container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .help-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .nav-menu {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 0.5rem 1rem;
            background: #ecf0f1;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #2c3e50;
            font-weight: 500;
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .help-section {
            display: none;
        }
        
        .help-section.active {
            display: block;
        }
        
        .help-section h2 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .help-section h3 {
            color: #34495e;
            margin: 1.5rem 0 0.5rem 0;
            font-size: 1.2rem;
        }
        
        .help-section p {
            margin-bottom: 1rem;
            color: #555;
        }
        
        .help-section ul {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }
        
        .help-section li {
            margin-bottom: 0.5rem;
            color: #555;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: 'Monaco', 'Menlo', monospace;
            overflow-x: auto;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid;
        }
        
        .alert.info {
            background: #e8f4fd;
            border-color: #3498db;
            color: #2980b9;
        }
        
        .alert.warning {
            background: #fef9e7;
            border-color: #f39c12;
            color: #d68910;
        }
        
        .alert.success {
            background: #eafaf1;
            border-color: #27ae60;
            color: #229954;
        }
        
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .status-item {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #27ae60;
        }
        
        .status-item.warning {
            border-left-color: #f39c12;
        }
        
        .status-item.error {
            border-left-color: #e74c3c;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }
            
            .header {
                padding: 1rem;
            }
            
            .nav-menu {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìö Health Monitoring System - Help & Documentation</h1>
        <p>Comprehensive guide to using the VARAi Commerce Studio health monitoring system</p>
    </div>
    
    <div class="container">
        <div class="help-content">
            <div class="nav-menu">
                <button class="nav-btn active" onclick="showSection('overview')">Overview</button>
                <button class="nav-btn" onclick="showSection('dashboard')">Dashboard</button>
                <button class="nav-btn" onclick="showSection('services')">Services</button>
                <button class="nav-btn" onclick="showSection('monitoring')">Monitoring</button>
                <button class="nav-btn" onclick="showSection('alerts')">Alerts</button>
                <button class="nav-btn" onclick="showSection('troubleshooting')">Troubleshooting</button>
                <button class="nav-btn" onclick="showSection('api')">API Reference</button>
            </div>
            
            <!-- Overview Section -->
            <div id="overview" class="help-section active">
                <h2>üîç System Overview</h2>
                <p>The VARAi Commerce Studio Health Monitoring System provides comprehensive real-time monitoring of all your application components, services, and infrastructure.</p>
                
                <h3>Key Features</h3>
                <ul>
                    <li><strong>Real-time Monitoring:</strong> Live status updates for all system components</li>
                    <li><strong>Performance Metrics:</strong> CPU, memory, response times, and throughput tracking</li>
                    <li><strong>Service Management:</strong> Cloud Run service monitoring and management</li>
                    <li><strong>Alert System:</strong> Automated notifications for system issues</li>
                    <li><strong>Health Dashboards:</strong> Visual representation of system health</li>
                    <li><strong>API Monitoring:</strong> Endpoint performance and error tracking</li>
                </ul>
                
                <div class="alert info">
                    <strong>Getting Started:</strong> The admin panel provides a centralized view of all system components. Use the status row at the top to quickly assess overall system health.
                </div>
                
                <h3>System Architecture</h3>
                <p>The health monitoring system consists of several key components:</p>
                <div class="status-grid">
                    <div class="status-item">
                        <strong>Frontend Dashboard</strong><br>
                        <small>Admin panel interface</small>
                    </div>
                    <div class="status-item">
                        <strong>Health API</strong><br>
                        <small>Backend monitoring service</small>
                    </div>
                    <div class="status-item">
                        <strong>WebSocket Service</strong><br>
                        <small>Real-time data streaming</small>
                    </div>
                    <div class="status-item">
                        <strong>Alert Manager</strong><br>
                        <small>Notification system</small>
                    </div>
                </div>
            </div>
            
            <!-- Dashboard Section -->
            <div id="dashboard" class="help-section">
                <h2>üìä Dashboard Guide</h2>
                <p>The admin dashboard provides a comprehensive view of your system's health and performance.</p>
                
                <h3>Status Row</h3>
                <p>The top row displays key performance indicators:</p>
                <ul>
                    <li><strong>System Health:</strong> Overall system status percentage</li>
                    <li><strong>API Performance:</strong> Average response time across all endpoints</li>
                    <li><strong>Database Load:</strong> Current database utilization</li>
                    <li><strong>Cloud Run:</strong> Number of active services</li>
                    <li><strong>Memory Usage:</strong> System memory utilization</li>
                    <li><strong>CPU Usage:</strong> Processor utilization</li>
                </ul>
                
                <div class="alert success">
                    <strong>Color Coding:</strong> Green indicates healthy status, yellow shows warnings, and red indicates critical issues requiring attention.
                </div>
                
                <h3>Performance Charts</h3>
                <p>Each status card includes a visual chart showing current performance relative to optimal levels. The bars fill based on current metrics and change color based on thresholds.</p>
                
                <h3>Auto-Refresh</h3>
                <p>The dashboard automatically refreshes every 30 seconds to provide real-time updates. You can also manually refresh using the "Refresh Status" button.</p>
            </div>
            
            <!-- Services Section -->
            <div id="services" class="help-section">
                <h2>‚öôÔ∏è Service Management</h2>
                <p>Manage and monitor your Google Cloud Run services directly from the admin panel.</p>
                
                <h3>Current Services</h3>
                <div class="status-grid">
                    <div class="status-item">
                        <strong>commerce-studio-website</strong><br>
                        <small>Main website and admin panel</small>
                    </div>
                    <div class="status-item">
                        <strong>health-monitoring-api</strong><br>
                        <small>Health monitoring backend</small>
                    </div>
                    <div class="status-item warning">
                        <strong>analytics-service</strong><br>
                        <small>Analytics and reporting</small>
                    </div>
                    <div class="status-item">
                        <strong>websocket-service</strong><br>
                        <small>Real-time communication</small>
                    </div>
                    <div class="status-item">
                        <strong>auth-service</strong><br>
                        <small>Authentication system</small>
                    </div>
                </div>
                
                <h3>Adding New Services</h3>
                <p>To add a new service to the monitoring system:</p>
                <ol>
                    <li>Click "Add Service" in the Cloud Run Services card</li>
                    <li>Enter the service name and configuration</li>
                    <li>Set up health check endpoints</li>
                    <li>Configure monitoring thresholds</li>
                    <li>Deploy to Cloud Run</li>
                </ol>
                
                <div class="alert warning">
                    <strong>Note:</strong> New services require proper health check endpoints to be monitored effectively.
                </div>
            </div>
            
            <!-- Monitoring Section -->
            <div id="monitoring" class="help-section">
                <h2>üìà Monitoring & Metrics</h2>
                <p>Comprehensive monitoring capabilities for all system components.</p>
                
                <h3>Health Checks</h3>
                <p>The system performs regular health checks on:</p>
                <ul>
                    <li>API endpoint availability and response times</li>
                    <li>Database connection and query performance</li>
                    <li>Memory and CPU utilization</li>
                    <li>Service uptime and error rates</li>
                    <li>WebSocket connection stability</li>
                </ul>
                
                <h3>Metrics Collection</h3>
                <p>Key metrics are collected every 30 seconds:</p>
                <div class="code-block">
{
  "timestamp": "2025-07-04T18:30:00Z",
  "system_health": 98,
  "api_response_time": 245,
  "database_load": 78,
  "memory_usage": 64,
  "cpu_usage": 42,
  "active_services": 5
}
                </div>
                
                <h3>Performance Thresholds</h3>
                <ul>
                    <li><strong>Green (Healthy):</strong> All metrics within optimal ranges</li>
                    <li><strong>Yellow (Warning):</strong> Metrics approaching threshold limits</li>
                    <li><strong>Red (Critical):</strong> Metrics exceeding safe operating limits</li>
                </ul>
            </div>
            
            <!-- Alerts Section -->
            <div id="alerts" class="help-section">
                <h2>üö® Alert System</h2>
                <p>Automated alerting for system issues and performance degradation.</p>
                
                <h3>Alert Types</h3>
                <ul>
                    <li><strong>Service Down:</strong> When a service becomes unavailable</li>
                    <li><strong>High Response Time:</strong> API responses exceeding 500ms</li>
                    <li><strong>Resource Usage:</strong> CPU or memory above 90%</li>
                    <li><strong>Database Issues:</strong> Connection failures or slow queries</li>
                    <li><strong>Error Rate:</strong> Error rate exceeding 5%</li>
                </ul>
                
                <h3>Notification Channels</h3>
                <p>Alerts can be sent via:</p>
                <ul>
                    <li>Email notifications</li>
                    <li>Slack integration</li>
                    <li>WebSocket real-time updates</li>
                    <li>Dashboard visual indicators</li>
                </ul>
                
                <div class="alert info">
                    <strong>Configuration:</strong> Alert thresholds and notification preferences can be configured in the system settings.
                </div>
            </div>
            
            <!-- Troubleshooting Section -->
            <div id="troubleshooting" class="help-section">
                <h2>üîß Troubleshooting</h2>
                <p>Common issues and their solutions.</p>
                
                <h3>Service Not Responding</h3>
                <p>If a service shows as offline:</p>
                <ol>
                    <li>Check the service logs in Google Cloud Console</li>
                    <li>Verify the service is deployed and running</li>
                    <li>Check network connectivity</li>
                    <li>Restart the service if necessary</li>
                </ol>
                
                <h3>High Response Times</h3>
                <p>For performance issues:</p>
                <ol>
                    <li>Check CPU and memory usage</li>
                    <li>Review database query performance</li>
                    <li>Scale up resources if needed</li>
                    <li>Optimize slow endpoints</li>
                </ol>
                
                <h3>Dashboard Not Loading</h3>
                <p>If the dashboard fails to load:</p>
                <ol>
                    <li>Refresh the browser page</li>
                    <li>Check browser console for errors</li>
                    <li>Verify WebSocket connection</li>
                    <li>Clear browser cache</li>
                </ol>
                
                <div class="alert warning">
                    <strong>Emergency Contact:</strong> For critical issues, contact the system administrator immediately.
                </div>
            </div>
            
            <!-- API Reference Section -->
            <div id="api" class="help-section">
                <h2>üîå API Reference</h2>
                <p>Health monitoring API endpoints and usage.</p>
                
                <h3>Base URL</h3>
                <div class="code-block">
https://commerce-studio-website-430841672794.us-central1.run.app/api/health
                </div>
                
                <h3>Endpoints</h3>
                
                <h4>GET /status</h4>
                <p>Get overall system status</p>
                <div class="code-block">
curl -X GET /api/health/status
                </div>
                
                <h4>GET /services</h4>
                <p>List all monitored services</p>
                <div class="code-block">
curl -X GET /api/health/services
                </div>
                
                <h4>GET /metrics</h4>
                <p>Get current system metrics</p>
                <div class="code-block">
curl -X GET /api/health/metrics
                </div>
                
                <h4>WebSocket Connection</h4>
                <p>Real-time updates via WebSocket</p>
                <div class="code-block">
ws://commerce-studio-website-430841672794.us-central1.run.app/api/health/ws
                </div>
                
                <div class="alert success">
                    <strong>Authentication:</strong> API endpoints require valid authentication tokens for access.
                </div>
            </div>
            
            <div style="margin-top: 2rem; text-align: center;">
                <button class="btn" onclick="window.close()">Close Help</button>
                <button class="btn" onclick="window.open('/admin/', '_blank')">Back to Dashboard</button>
            </div>
        </div>
    </div>
    
    <script>
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.help-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(button => button.classList.remove('active'));
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
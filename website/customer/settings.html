<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Settings - VARAi Customer Portal</title>
    <link rel="stylesheet" href="../css/varai-design-system.css">
    <link rel="stylesheet" href="../css/enterprise-enhancements.css">
    <link rel="stylesheet" href="../css/apple-hero-sections.css">
    <style>
        .settings-container {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--varai-background) 0%, var(--varai-gray-50) 100%);
        }
        
        .settings-navbar {
            background: var(--varai-background);
            border-bottom: 1px solid var(--varai-border);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .settings-nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .settings-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--varai-primary);
            text-decoration: none;
            background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .settings-nav-links {
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .settings-nav-link {
            color: var(--varai-gray-600);
            text-decoration: none;
            font-weight: 500;
            transition: var(--varai-transition);
            padding: 0.5rem 1rem;
            border-radius: 6px;
        }
        
        .settings-nav-link:hover,
        .settings-nav-link.active {
            color: var(--varai-accent);
            background: rgba(30, 150, 252, 0.1);
        }
        
        .settings-user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .settings-user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, var(--varai-gray-50) 0%, var(--varai-gray-100) 100%);
            border-radius: 8px;
            border: 1px solid var(--varai-border);
        }
        
        .settings-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .settings-user-name {
            font-weight: 600;
            color: var(--varai-foreground);
            font-size: 0.9rem;
        }
        
        .settings-main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 2rem;
        }
        
        .settings-sidebar {
            background: var(--varai-background);
            border: 1px solid var(--varai-border);
            border-radius: 12px;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 120px;
        }
        
        .settings-nav {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .settings-nav-item {
            margin-bottom: 0.5rem;
        }
        
        .settings-nav-button {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: none;
            border: none;
            border-radius: 8px;
            color: var(--varai-gray-600);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--varai-transition);
            text-align: left;
        }
        
        .settings-nav-button:hover,
        .settings-nav-button.active {
            background: linear-gradient(135deg, var(--varai-gray-50) 0%, var(--varai-gray-100) 100%);
            color: var(--varai-accent);
        }
        
        .settings-nav-icon {
            width: 20px;
            height: 20px;
        }
        
        .settings-content {
            background: var(--varai-background);
            border: 1px solid var(--varai-border);
            border-radius: 12px;
            padding: 2rem;
        }
        
        .settings-section {
            display: none;
        }
        
        .settings-section.active {
            display: block;
        }
        
        .settings-section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--varai-foreground);
            margin-bottom: 0.5rem;
        }
        
        .settings-section-description {
            color: var(--varai-gray-600);
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .settings-form-group {
            margin-bottom: 2rem;
        }
        
        .settings-form-label {
            display: block;
            font-weight: 500;
            color: var(--varai-foreground);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .settings-form-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid var(--varai-border);
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--varai-transition);
            background: var(--varai-background);
            color: var(--varai-foreground);
        }
        
        .settings-form-input:focus {
            outline: none;
            border-color: var(--varai-accent);
            box-shadow: 0 0 0 3px rgba(30, 150, 252, 0.1);
        }
        
        .settings-form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .settings-form-select {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid var(--varai-border);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--varai-background);
            color: var(--varai-foreground);
            cursor: pointer;
        }
        
        .settings-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: linear-gradient(135deg, var(--varai-gray-50) 0%, var(--varai-gray-100) 100%);
            border: 1px solid var(--varai-border);
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .settings-toggle-info {
            flex: 1;
        }
        
        .settings-toggle-title {
            font-weight: 500;
            color: var(--varai-foreground);
            margin-bottom: 0.25rem;
        }
        
        .settings-toggle-description {
            font-size: 0.8rem;
            color: var(--varai-gray-600);
        }
        
        .settings-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background: var(--varai-gray-300);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--varai-transition);
        }
        
        .settings-switch.active {
            background: var(--varai-accent);
        }
        
        .settings-switch::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: var(--varai-transition);
        }
        
        .settings-switch.active::before {
            transform: translateX(24px);
        }
        
        .integration-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .integration-card {
            background: linear-gradient(135deg, var(--varai-gray-50) 0%, var(--varai-gray-100) 100%);
            border: 1px solid var(--varai-border);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
        }
        
        .integration-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .integration-card-title {
            font-weight: 600;
            color: var(--varai-foreground);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .integration-card-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .integration-status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .integration-status-badge.connected {
            background: rgba(48, 209, 88, 0.1);
            color: var(--varai-success);
        }
        
        .integration-status-badge.disconnected {
            background: rgba(255, 59, 48, 0.1);
            color: var(--varai-error);
        }
        
        .integration-card-description {
            color: var(--varai-gray-600);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }
        
        .integration-card-actions {
            display: flex;
            gap: 0.75rem;
        }
        
        .api-key-item {
            background: linear-gradient(135deg, var(--varai-gray-50) 0%, var(--varai-gray-100) 100%);
            border: 1px solid var(--varai-border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .api-key-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }
        
        .api-key-name {
            font-weight: 500;
            color: var(--varai-foreground);
        }
        
        .api-key-date {
            font-size: 0.8rem;
            color: var(--varai-gray-500);
        }
        
        .api-key-value {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.8rem;
            background: var(--varai-background);
            border: 1px solid var(--varai-border);
            border-radius: 4px;
            padding: 0.5rem;
            margin-bottom: 0.75rem;
            word-break: break-all;
        }
        
        .api-key-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--varai-transition);
        }
        
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: var(--varai-shadow-md);
        }
        
        .btn-secondary {
            background: var(--varai-background);
            color: var(--varai-gray-600);
            border: 1px solid var(--varai-border);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--varai-transition);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, var(--varai-gray-50) 0%, var(--varai-gray-100) 100%);
        }
        
        .btn-danger {
            background: var(--varai-error);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--varai-transition);
        }
        
        .btn-danger:hover {
            background: #d32f2f;
        }
        
        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }
        
        @media (max-width: 768px) {
            .settings-nav-content {
                padding: 0 1rem;
            }
            
            .settings-nav-links {
                display: none;
            }
            
            .settings-main {
                grid-template-columns: 1fr;
                padding: 1rem;
                gap: 1rem;
            }
            
            .settings-sidebar {
                position: static;
                order: 2;
            }
            
            .settings-content {
                order: 1;
            }
        }
    </style>
</head>
<body>
    <div class="settings-container">
        <!-- Settings Navigation -->
        <nav class="settings-navbar">
            <div class="settings-nav-content">
                <a href="index.html" class="settings-logo">VARAi Customer Portal</a>
                
                <div class="settings-nav-links">
                    <a href="index.html" class="settings-nav-link">Overview</a>
                    <a href="dashboard.html" class="settings-nav-link">Dashboard</a>
                    <a href="settings.html" class="settings-nav-link active">Settings</a>
                </div>
                
                <div class="settings-user-menu">
                    <div class="settings-user-info">
                        <div class="settings-avatar" id="settingsAvatar">V</div>
                        <span class="settings-user-name" id="settingsUserName">Loading...</span>
                    </div>
                    <button class="logout-button" onclick="logout()" style="background: none; border: 1px solid var(--varai-border); color: var(--varai-gray-600); padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; transition: var(--varai-transition); font-size: 0.9rem;">Sign Out</button>
                </div>
            </div>
            
            /* PMS Integration Row Styles */
            .pms-integration-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }
            
            .pms-integration-row {
                border: 1px solid var(--varai-border);
                border-radius: 12px;
                background: var(--varai-card);
                overflow: hidden;
                transition: all 0.3s ease;
            }
            
            .pms-integration-row:hover {
                border-color: var(--varai-primary);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            }
            
            .pms-integration-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 1.5rem;
                cursor: pointer;
                transition: background-color 0.2s ease;
            }
            
            .pms-integration-header:hover {
                background: var(--varai-gray-50);
            }
            
            .pms-integration-info {
                display: flex;
                align-items: center;
                gap: 1rem;
            }
            
            .pms-integration-icon {
                width: 48px;
                height: 48px;
                border-radius: 12px;
                background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-secondary) 100%);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 600;
                font-size: 1.2rem;
            }
            
            .pms-integration-details {
                flex: 1;
            }
            
            .pms-integration-name {
                font-size: 1.1rem;
                font-weight: 600;
                color: var(--varai-foreground);
                margin-bottom: 0.25rem;
            }
            
            .pms-integration-description {
                font-size: 0.9rem;
                color: var(--varai-gray-600);
            }
            
            .pms-integration-status {
                display: flex;
                align-items: center;
                gap: 1rem;
            }
            
            .pms-integration-chevron {
                font-size: 1.2rem;
                color: var(--varai-gray-400);
                transition: transform 0.3s ease;
            }
            
            .pms-integration-row.expanded .pms-integration-chevron {
                transform: rotate(180deg);
            }
            
            .pms-integration-content {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
                border-top: 1px solid var(--varai-border);
            }
            
            .pms-integration-row.expanded .pms-integration-content {
                max-height: 500px;
            }
            
            .pms-integration-form {
                padding: 1.5rem;
                background: var(--varai-gray-25);
            }
            
            .pms-integration-actions {
                display: flex;
                gap: 0.75rem;
                margin-top: 1.5rem;
                padding-top: 1.5rem;
                border-top: 1px solid var(--varai-border);
            }
            
            /* Connected Apps Styles */
            .token-balance-card {
                background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
                border-radius: 16px;
                padding: 2rem;
                margin-bottom: 2rem;
                color: white;
            }
            
            .token-balance-header {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 1.5rem;
            }
            
            .token-balance-title {
                font-size: 1.1rem;
                font-weight: 500;
                margin-bottom: 0.5rem;
                opacity: 0.9;
            }
            
            .token-balance-amount {
                font-size: 2.5rem;
                font-weight: 700;
                margin-bottom: 0.25rem;
            }
            
            .token-balance-plan {
                font-size: 0.9rem;
                opacity: 0.8;
            }
            
            .token-balance-actions {
                display: flex;
                gap: 0.75rem;
            }
            
            .token-balance-actions .btn-secondary {
                background: rgba(255, 255, 255, 0.2);
                color: white;
                border: 1px solid rgba(255, 255, 255, 0.3);
            }
            
            .token-balance-actions .btn-secondary:hover {
                background: rgba(255, 255, 255, 0.3);
            }
            
            .token-balance-actions .btn-primary {
                background: white;
                color: var(--varai-primary);
            }
            
            .token-usage-bar {
                background: rgba(255, 255, 255, 0.2);
                border-radius: 8px;
                height: 8px;
                margin-bottom: 0.75rem;
                overflow: hidden;
            }
            
            .token-usage-fill {
                background: white;
                height: 100%;
                border-radius: 8px;
                transition: width 0.3s ease;
            }
            
            .token-usage-text {
                font-size: 0.9rem;
                opacity: 0.9;
            }
            
            .connected-apps-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 1.5rem;
                margin-bottom: 3rem;
            }
            
            .app-card {
                background: var(--varai-card);
                border: 1px solid var(--varai-border);
                border-radius: 16px;
                padding: 1.5rem;
                transition: var(--varai-transition);
            }
            
            .app-card:hover {
                border-color: var(--varai-primary);
                box-shadow: var(--varai-shadow-lg);
                transform: translateY(-2px);
            }
            
            .app-card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }
            
            .app-icon {
                width: 48px;
                height: 48px;
                border-radius: 12px;
                background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
            }
            
            .app-icon svg {
                width: 24px;
                height: 24px;
            }
            
            .app-status-badge {
                padding: 0.25rem 0.75rem;
                border-radius: 12px;
                font-size: 0.8rem;
                font-weight: 500;
            }
            
            .app-status-badge.active {
                background: rgba(48, 209, 88, 0.1);
                color: var(--varai-success);
            }
            
            .app-status-badge.inactive {
                background: rgba(142, 142, 147, 0.1);
                color: var(--varai-gray-500);
            }
            
            .app-title {
                font-size: 1.2rem;
                font-weight: 600;
                color: var(--varai-foreground);
                margin-bottom: 0.5rem;
            }
            
            .app-description {
                color: var(--varai-gray-600);
                font-size: 0.9rem;
                line-height: 1.5;
                margin-bottom: 1rem;
            }
            
            .app-pricing {
                display: flex;
                align-items: baseline;
                gap: 0.5rem;
                margin-bottom: 1.5rem;
            }
            
            .app-cost {
                font-size: 1.1rem;
                font-weight: 600;
                color: var(--varai-primary);
            }
            
            .app-cost-unit {
                font-size: 0.8rem;
                color: var(--varai-gray-500);
            }
            
            .app-stats {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1rem;
                margin-bottom: 1.5rem;
                padding: 1rem;
                background: var(--varai-gray-50);
                border-radius: 8px;
            }
            
            .app-stat {
                text-align: center;
            }
            
            .app-stat-value {
                display: block;
                font-size: 1.2rem;
                font-weight: 600;
                color: var(--varai-foreground);
            }
            
            .app-stat-label {
                font-size: 0.8rem;
                color: var(--varai-gray-500);
            }
            
            .app-card-actions {
                display: flex;
                gap: 0.75rem;
            }
            
            .billing-section {
                border-top: 1px solid var(--varai-border);
                padding-top: 2rem;
            }
            
            .billing-title {
                font-size: 1.3rem;
                font-weight: 600;
                color: var(--varai-foreground);
                margin-bottom: 1.5rem;
            }
            
            .billing-cards {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 1.5rem;
            }
            
            .billing-card {
                background: var(--varai-card);
                border: 1px solid var(--varai-border);
                border-radius: 12px;
                padding: 1.5rem;
            }
            
            .billing-card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }
            
            .billing-card-header h4 {
                font-size: 1rem;
                font-weight: 600;
                color: var(--varai-foreground);
                margin: 0;
            }
            
            .billing-plan-badge {
                background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
                color: white;
                padding: 0.25rem 0.75rem;
                border-radius: 12px;
                font-size: 0.8rem;
                font-weight: 500;
            }
            
            .billing-date {
                background: var(--varai-gray-100);
                color: var(--varai-gray-600);
                padding: 0.25rem 0.75rem;
                border-radius: 12px;
                font-size: 0.8rem;
                font-weight: 500;
            }
            
            .billing-price {
                font-size: 2rem;
                font-weight: 700;
                color: var(--varai-foreground);
                margin-bottom: 1rem;
            }
            
            .billing-period {
                font-size: 1rem;
                font-weight: 400;
                color: var(--varai-gray-500);
            }
            
            .billing-amount {
                font-size: 1.5rem;
                font-weight: 600;
                color: var(--varai-foreground);
                margin-bottom: 1rem;
            }
            
            .billing-features {
                margin-bottom: 1.5rem;
            }
            
            .billing-feature {
                font-size: 0.9rem;
                color: var(--varai-gray-600);
                margin-bottom: 0.5rem;
            }
            
            .billing-method {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                margin-bottom: 1.5rem;
            }
            
            .billing-method-icon {
                font-size: 1.2rem;
            }
            
            .billing-method-text {
                font-size: 0.9rem;
                color: var(--varai-gray-600);
            }
            
            .billing-card-actions {
                margin-top: auto;
            }
            
            @media (max-width: 768px) {
                .connected-apps-grid {
                    grid-template-columns: 1fr;
                }
                
                .token-balance-header {
                    flex-direction: column;
                    gap: 1rem;
                }
                
                .token-balance-actions {
                    align-self: stretch;
                }
                
                .token-balance-actions .btn-small {
                    flex: 1;
            
            /* Notification Styles */
            .notification {
                position: fixed;
                top: 20px;
                right: 20px;
                max-width: 400px;
                padding: 1rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 1000;
                animation: slideInRight 0.3s ease-out;
            }
            
            .notification.success {
                background: #d4edda;
                color: #155724;
                border-left: 4px solid #28a745;
            }
            
            .notification.info {
                background: #d1ecf1;
                color: #0c5460;
                border-left: 4px solid #17a2b8;
            }
            
            .notification.warning {
                background: #fff3cd;
                color: #856404;
                border-left: 4px solid #ffc107;
            }
            
            .notification.error {
                background: #f8d7da;
                color: #721c24;
                border-left: 4px solid #dc3545;
            }
            
            .notification-content {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .notification-message {
                flex: 1;
                font-size: 0.9rem;
                line-height: 1.4;
            }
            
            .notification-close {
                background: none;
                border: none;
                font-size: 1.2rem;
                cursor: pointer;
                opacity: 0.7;
                transition: opacity 0.2s ease;
                padding: 0;
                width: 20px;
                height: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .notification-close:hover {
                opacity: 1;
            }
            
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
                }
                
                .billing-cards {
                    grid-template-columns: 1fr;
                }
                
                .app-stats {
                    grid-template-columns: 1fr;
                }
            }
            </nav>
        
        <!-- Main Settings Content -->
        <main class="settings-main">
            <!-- Settings Sidebar -->
            <aside class="settings-sidebar">
                <nav class="settings-nav">
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li class="settings-nav-item">
                            <button class="settings-nav-button active" onclick="showSection('profile')">
                                <svg class="settings-nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Profile Settings
                            </button>
                        </li>
                        <li class="settings-nav-item">
                            <button class="settings-nav-button" onclick="showSection('integrations')">
                                <svg class="settings-nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Store Integrations
                            </button>
                        </li>
                        <li class="settings-nav-item">
                            <button class="settings-nav-button" onclick="showSection('pms-sync')">
                                <svg class="settings-nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                PMS Synchronization
                            </button>
                        </li>
                        <li class="settings-nav-item">
                            <button class="settings-nav-button" onclick="showSection('api-keys')">
                                <svg class="settings-nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 2L19 4L15 8L22 15L21 16L14 9L10 13L8 11L12 7L16 3L21 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M5 12L2 15L5 18L8 15L5 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                API Keys
                            </button>
                        </li>
                        <li class="settings-nav-item">
                            <button class="settings-nav-button" onclick="showSection('notifications')">
                                <svg class="settings-nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Notifications
                            </button>
                        </li>
                        <li class="settings-nav-item">
                            <button class="settings-nav-button" onclick="showSection('connected-apps')">
                                <svg class="settings-nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Connected Apps
                            </button>
                        </li>
                        <li class="settings-nav-item">
                            <button class="settings-nav-button" onclick="showSection('security')">
                                <svg class="settings-nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 22S8 18 8 12V7L12 5L16 7V12C16 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Security
                            </button>
                        </li>
                    </ul>
                </nav>
            </aside>
            
            <!-- Settings Content -->
            <div class="settings-content">
                <!-- Profile Settings Section -->
                <section id="profile-section" class="settings-section active">
                    <h2 class="settings-section-title">Profile Settings</h2>
                    <p class="settings-section-description">
                        Manage your account information and preferences.
                    </p>
                    
                    <form id="profileForm">
                        <div class="settings-form-group">
                            <label for="companyName" class="settings-form-label">Company Name</label>
                            <input type="text" id="companyName" class="settings-form-input" placeholder="Enter your company name">
                        </div>
                        
                        <div class="settings-form-group">
                            <label for="contactEmail" class="settings-form-label">Contact Email</label>
                            <input type="email" id="contactEmail" class="settings-form-input" placeholder="Enter your email address">
                        </div>
                        
                        <div class="settings-form-group">
                            <label for="phoneNumber" class="settings-form-label">Phone Number</label>
                            <input type="tel" id="phoneNumber" class="settings-form-input" placeholder="Enter your phone number">
                        </div>
                        
                        <div class="settings-form-group">
                            <label for="businessType" class="settings-form-label">Business Type</label>
                            <select id="businessType" class="settings-form-select">
                                <option value="">Select business type</option>
                                <option value="retail">Retail Store</option>
                                <option value="boutique">Boutique</option>
                                <option value="enterprise">Enterprise</option>
                                <option value="online">Online Only</option>
                            </select>
                        </div>
                        
                        <div class="settings-form-group">
                            <label for="address" class="settings-form-label">Business Address</label>
                            <textarea id="address" class="settings-form-input settings-form-textarea" placeholder="Enter your business address"></textarea>
                        </div>
                        
                        <button type="submit" class="btn-primary">Save Profile Settings</button>
                    </form>
                </section>
                
                <!-- Store Integrations Section -->
                <section id="integrations-section" class="settings-section">
                    <h2 class="settings-section-title">Store Integrations</h2>
                    <p class="settings-section-description">
                        Connect your e-commerce platforms to enable AI-powered features and analytics.
                    </p>
                    
                    <div class="integration-cards">
                        <div class="integration-card">
                            <div class="integration-card-header">
                                <div class="integration-card-title">
                                    <div class="integration-card-icon">S</div>
                                    Shopify
                                </div>
                                <span class="integration-status-badge connected">Connected</span>
                            </div>
                            <p class="integration-card-description">
                                Sync your Shopify store data, enable AI recommendations, and track customer behavior across your online store.
                            </p>
                            <div class="integration-card-actions">
                                <button class="btn-secondary btn-small" onclick="configureIntegration('shopify')">Configure</button>
                                <button class="btn-danger btn-small" onclick="disconnectIntegration('shopify')">Disconnect</button>
                            </div>
                        </div>
                        
                        <div class="integration-card">
                            <div class="integration-card-header">
                                <div class="integration-card-title">
                                    <div class="integration-card-icon">M</div>
                                    Magento
                                </div>
                                <span class="integration-status-badge connected">Connected</span>
                            </div>
                            <p class="integration-card-description">
                                Integrate with your Magento store for advanced inventory management and customer analytics.
                            </p>
                            <div class="integration-card-actions">
                                <button class="btn-secondary btn-small" onclick="configureIntegration('magento')">Configure</button>
                                <button class="btn-danger btn-small" onclick="disconnectIntegration('magento')">Disconnect</button>
                            </div>
                        </div>
                        
                        <div class="integration-card">
                            <div class="integration-card-header">
                                <div class="integration-card-title">
                                    <div class="integration-card-icon">W</div>
                                    WooCommerce
                                </div>
                                <span class="integration-status-badge disconnected">Not Connected</span>
                            </div>
                            <p class="integration-card-description">
                                Connect your WooCommerce store to access AI-powered product recommendations and analytics.
                            </p>
                            <div class="integration-card-actions">
                                <button class="btn-primary btn-small" onclick="connectIntegration('woocommerce')">Connect</button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- PMS Synchronization Section -->
                <section id="pms-sync-section" class="settings-section">
                    <h2 class="settings-section-title">PMS Synchronization</h2>
                    <p class="settings-section-description">
                        Connect your local store Point of Sale Management Systems to synchronize inventory, sales data, and customer information with VARAi Commerce Studio.
                    </p>
                    
                    <div class="pms-integration-list">
                        <!-- Occuco PMS -->
                        <div class="pms-integration-row" data-platform="occuco">
                            <div class="pms-integration-header" onclick="togglePMSRow('occuco')">
                                <div class="pms-integration-info">
                                    <div class="pms-integration-icon">O</div>
                                    <div class="pms-integration-details">
                                        <div class="pms-integration-name">Occuco PMS</div>
                                        <div class="pms-integration-description">Real-time inventory management and sales tracking</div>
                                    </div>
                                </div>
                                <div class="pms-integration-status">
                                    <span class="integration-status-badge connected">Connected</span>
                                    <div class="pms-integration-chevron">▼</div>
                                </div>
                            </div>
                            <div class="pms-integration-content" id="occuco-content">
                                <div class="pms-integration-form">
                                    <div class="settings-form-group">
                                        <label class="settings-form-label">API Key</label>
                                        <input type="password" class="settings-form-input" value="occ_live_••••••••••••••••" readonly>
                                    </div>
                                    <div class="settings-form-group">
                                        <label class="settings-form-label">Store URL</label>
                                        <input type="url" class="settings-form-input" value="https://api.occuco.com/store/12345" readonly>
                                    </div>
                                    <div class="settings-form-group">
                                        <label class="settings-form-label">Sync Frequency</label>
                                        <select class="settings-form-input">
                                            <option value="realtime" selected>Real-time</option>
                                            <option value="5min">Every 5 minutes</option>
                                            <option value="15min">Every 15 minutes</option>
                                            <option value="hourly">Hourly</option>
                                        </select>
                                    </div>
                                    <div class="pms-integration-actions">
                                        <button class="btn-secondary btn-small" onclick="testPMSConnection('occuco')">Test Connection</button>
                                        <button class="btn-danger btn-small" onclick="disconnectPMS('occuco')">Disconnect</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="integration-card">
                            <div class="integration-card-header">
                                <div class="integration-card-title">
                                    <div class="integration-card-icon">S</div>
                                    Square POS
                                </div>
                                <span class="integration-status-badge connected">Connected</span>
                            </div>
                            <p class="integration-card-description">
                                Integrate with Square POS for seamless payment processing, inventory sync, and customer analytics across all channels.
                            </p>
                            <div class="integration-card-actions">
                                <button class="btn-secondary btn-small" onclick="configurePMSIntegration('square')">Configure</button>
                                <button class="btn-danger btn-small" onclick="disconnectPMSIntegration('square')">Disconnect</button>
                            </div>
                        </div>
                        
                        <div class="integration-card">
                            <div class="integration-card-header">
                                <div class="integration-card-title">
                                    <div class="integration-card-icon">L</div>
                                    Lightspeed Retail
                                </div>
                                <span class="integration-status-badge disconnected">Not Connected</span>
                            </div>
                            <p class="integration-card-description">
                                Connect Lightspeed Retail POS for comprehensive inventory management and multi-location sales synchronization.
                            </p>
                            <div class="integration-card-actions">
                                <button class="btn-primary btn-small" onclick="connectPMSIntegration('lightspeed')">Connect</button>
                            </div>
                        </div>
                        
                        <div class="integration-card">
                            <div class="integration-card-header">
                                <div class="integration-card-title">
                                    <div class="integration-card-icon">C</div>
                                    Clover POS
                                </div>
                                <span class="integration-status-badge disconnected">Not Connected</span>
                            </div>
                            <p class="integration-card-description">
                                Integrate with Clover POS for advanced payment processing, customer management, and real-time sales analytics.
                            </p>
                            <div class="integration-card-actions">
                                <button class="btn-primary btn-small" onclick="connectPMSIntegration('clover')">Connect</button>
                            </div>
                        </div>
                        
                        <div class="integration-card">
                            <div class="integration-card-header">
                                <div class="integration-card-title">
                                    <div class="integration-card-icon">V</div>
                                    Vend POS
                                </div>
                                <span class="integration-status-badge disconnected">Not Connected</span>
                            </div>
                            <p class="integration-card-description">
                                Connect Vend POS for cloud-based retail management, inventory tracking, and customer relationship management.
                            </p>
                            <div class="integration-card-actions">
                                <button class="btn-primary btn-small" onclick="connectPMSIntegration('vend')">Connect</button>
                            </div>
                        </div>
                        
                        <div class="integration-card">
                            <div class="integration-card-header">
                                <div class="integration-card-title">
                                    <div class="integration-card-icon">R</div>
                                    Revel Systems
                                </div>
                                <span class="integration-status-badge disconnected">Not Connected</span>
                            </div>
                            <p class="integration-card-description">
                                Integrate with Revel Systems for enterprise-grade POS functionality, advanced reporting, and multi-location management.
                            </p>
                            <div class="integration-card-actions">
                                <button class="btn-primary btn-small" onclick="connectPMSIntegration('revel')">Connect</button>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, var(--varai-gray-50) 0%, var(--varai-gray-100) 100%); border: 1px solid var(--varai-border); border-radius: 12px;">
                        <h3 style="margin-bottom: 1rem; color: var(--varai-foreground); font-size: 1.1rem; font-weight: 600;">Synchronization Settings</h3>
                        
                        <div class="settings-toggle">
                            <div class="settings-toggle-info">
                                <div class="settings-toggle-title">Real-time Inventory Sync</div>
                                <div class="settings-toggle-description">Automatically sync inventory levels across all connected PMS systems</div>
                            </div>
                            <div class="settings-switch active" onclick="toggleSwitch(this)" data-setting="realtime-inventory"></div>
                        </div>
                        
                        <div class="settings-toggle">
                            <div class="settings-toggle-info">
                                <div class="settings-toggle-title">Sales Data Integration</div>
                                <div class="settings-toggle-description">Import sales transactions and customer data from PMS systems</div>
                            </div>
                            <div class="settings-switch active" onclick="toggleSwitch(this)" data-setting="sales-integration"></div>
                        </div>
                        
                        <div class="settings-toggle">
                            <div class="settings-toggle-info">
                                <div class="settings-toggle-title">Customer Profile Sync</div>
                                <div class="settings-toggle-description">Synchronize customer profiles and purchase history across platforms</div>
                            </div>
                            <div class="settings-switch" onclick="toggleSwitch(this)" data-setting="customer-sync"></div>
                        </div>
                        
                        <div class="settings-toggle">
                            <div class="settings-toggle-info">
                                <div class="settings-toggle-title">Price Synchronization</div>
                                <div class="settings-toggle-description">Keep product prices consistent across all connected systems</div>
                            </div>
                            <div class="settings-switch active" onclick="toggleSwitch(this)" data-setting="price-sync"></div>
                        </div>
                    </div>
                </section>
                
                <!-- API Keys Section -->
                <section id="api-keys-section" class="settings-section">
                    <h2 class="settings-section-title">API Keys</h2>
                    <p class="settings-section-description">
                        Manage your API keys for accessing VARAi Commerce Studio services programmatically.
                    </p>
                    
                    <div style="margin-bottom: 2rem;">
                        <button class="btn-primary" onclick="generateAPIKey()">Generate New API Key</button>
                    </div>
                    
                    <div id="apiKeysList">
                        <div class="api-key-item">
                            <div class="api-key-header">
                                <span class="api-key-name">Production API Key</span>
                                <span class="api-key-date">Created: Dec 15, 2024</span>
                            </div>
                            <div class="api-key-value">varai_prod_1234567890abcdef1234567890abcdef</div>
                            <div class="api-key-actions">
                                <button class="btn-secondary btn-small" onclick="copyAPIKey('varai_prod_1234567890abcdef1234567890abcdef')">Copy</button>
                                <button class="btn-danger btn-small" onclick="revokeAPIKey('prod_key_1')">Revoke</button>
                            </div>
                        </div>
                        
                        <div class="api-key-item">
                            <div class="api-key-header">
                                <span class="api-key-name">Development API Key</span>
                                <span class="api-key-date">Created: Dec 10, 2024</span>
                            </div>
                            <div class="api-key-value">varai_dev_abcdef1234567890abcdef1234567890</div>
                            <div class="api-key-actions">
                                <button class="btn-secondary btn-small" onclick="copyAPIKey('varai_dev_abcdef1234567890abcdef1234567890')">Copy</button>
                                <button class="btn-danger btn-small" onclick="revokeAPIKey('dev_key_1')">Revoke</button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Notifications Section -->
                <section id="notifications-section" class="settings-section">
                    <h2 class="settings-section-title">Notification Preferences</h2>
                    <p class="settings-section-description">
                        Configure how and when you receive notifications from VARAi Commerce Studio.
                    </p>
                    
                    <div class="settings-toggle">
                        <div class="settings-toggle-info">
                            <div class="settings-toggle-title">Email Notifications</div>
                            <div class="settings-toggle-description">Receive important updates and alerts via email</div>
                        </div>
                        <div class="settings-switch active" onclick="toggleSwitch(this)"></div>
                    </div>
                    
                    <div class="settings-toggle">
                        <div class="settings-toggle-info">
                            <div class="settings-toggle-title">Sales Alerts</div>
                            <div class="settings-toggle-description">Get notified when you receive new orders</div>
                        </div>
                        <div class="settings-switch active" onclick="toggleSwitch(this)"></div>
                    </div>
                    
                    <div class="settings-toggle">
                        <div class="settings-toggle-info">
                            <div class="settings-toggle
<p class="settings-section-description">
                        Configure how and when you receive notifications from VARAi Commerce Studio.
                    </p>
                    
                    <div class="settings-toggle">
                        <div class="settings-toggle-info">
                            <div class="settings-toggle-title">Email Notifications</div>
                            <div class="settings-toggle-description">Receive important updates and alerts via email</div>
                        </div>
                        <div class="settings-switch active" onclick="toggleSwitch(this)"></div>
                    </div>
                    
                    <div class="settings-toggle">
                        <div class="settings-toggle-info">
                            <div class="settings-toggle-title">Sales Alerts</div>
                            <div class="settings-toggle-description">Get notified when you receive new orders</div>
                        </div>
                        <div class="settings-switch active" onclick="toggleSwitch(this)"></div>
                    </div>
                    
                    <div class="settings-toggle">
                        <div class="settings-toggle-info">
                            <div class="settings-toggle-title">Weekly Reports</div>
                            <div class="settings-toggle-description">Receive weekly analytics and performance reports</div>
                        </div>
                        <div class="settings-switch" onclick="toggleSwitch(this)"></div>
                    </div>
                    
                    <div class="settings-toggle">
                        <div class="settings-toggle-info">
                            <div class="settings-toggle-title">Inventory Alerts</div>
                            <div class="settings-toggle-description">Get notified when inventory levels are low</div>
                        </div>
                        <div class="settings-switch active" onclick="toggleSwitch(this)"></div>
                    </div>
                    
                    <div class="settings-toggle">
                        <div class="settings-toggle-info">
                            <div class="settings-toggle-title">Marketing Updates</div>
                            <div class="settings-toggle-description">Receive updates about new features and marketing opportunities</div>
                        </div>
                        <div class="settings-switch" onclick="toggleSwitch(this)"></div>
                    </div>
                </section>
                
                <!-- Connected Apps Section -->
                <section id="connected-apps-section" class="settings-section">
                    <h2 class="settings-section-title">Connected Apps</h2>
                    <p class="settings-section-description">
                        Discover and activate VARAi's AI-powered services to enhance your eyewear business. Each service uses tokens for usage-based billing.
                    </p>
                    
                    <!-- Token Balance Card -->
                    <div class="token-balance-card">
                        <div class="token-balance-header">
                            <div class="token-balance-info">
                                <h3 class="token-balance-title">Token Balance</h3>
                                <div class="token-balance-amount">2,847 tokens</div>
                                <div class="token-balance-plan">Professional Plan</div>
                            </div>
                            <div class="token-balance-actions">
                                <button class="btn-secondary btn-small" onclick="viewUsageHistory()">Usage History</button>
                                <button class="btn-primary btn-small" onclick="purchaseTokens()">Buy Tokens</button>
                            </div>
                        </div>
                        <div class="token-usage-bar">
                            <div class="token-usage-fill" style="width: 28.47%"></div>
                        </div>
                        <div class="token-usage-text">2,847 of 10,000 tokens used this month</div>
                    </div>
                    
                    <!-- Available Apps Grid -->
                    <div class="connected-apps-grid">
                        <!-- Virtual Try-On App -->
                        <div class="app-card" data-app="virtual-try-on">
                            <div class="app-card-header">
                                <div class="app-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z" stroke="currentColor" stroke-width="2"/>
                                        <path d="M2.458 12C3.732 7.943 7.523 5 12 5C16.478 5 20.268 7.943 21.542 12C20.268 16.057 16.478 19 12 19C7.523 19 3.732 16.057 2.458 12Z" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="app-status-badge active">Active</div>
                            </div>
                            <div class="app-card-content">
                                <h3 class="app-title">Virtual Try-On</h3>
                                <p class="app-description">AI-powered virtual eyewear fitting for customers</p>
                                <div class="app-pricing">
                                    <span class="app-cost">5 tokens</span>
                                    <span class="app-cost-unit">per try-on session</span>
                                </div>
                                <div class="app-stats">
                                    <div class="app-stat">
                                        <span class="app-stat-value">1,247</span>
                                        <span class="app-stat-label">Sessions this month</span>
                                    </div>
                                    <div class="app-stat">
                                        <span class="app-stat-value">6,235</span>
                                        <span class="app-stat-label">Tokens used</span>
                                    </div>
                                </div>
                            </div>
                            <div class="app-card-actions">
                                <button class="btn-secondary btn-small" onclick="configureApp('virtual-try-on')">Configure</button>
                                <button class="btn-danger btn-small" onclick="deactivateApp('virtual-try-on')">Deactivate</button>
                            </div>
                        </div>
                        
                        <!-- Face Analysis App -->
                        <div class="app-card" data-app="face-analysis">
                            <div class="app-card-header">
                                <div class="app-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="app-status-badge active">Active</div>
                            </div>
                            <div class="app-card-content">
                                <h3 class="app-title">Face Analysis</h3>
                                <p class="app-description">Advanced facial feature analysis for frame recommendations</p>
                                <div class="app-pricing">
                                    <span class="app-cost">3 tokens</span>
                                    <span class="app-cost-unit">per analysis</span>
                                </div>
                                <div class="app-stats">
                                    <div class="app-stat">
                                        <span class="app-stat-value">892</span>
                                        <span class="app-stat-label">Analyses this month</span>
                                    </div>
                                    <div class="app-stat">
                                        <span class="app-stat-value">2,676</span>
                                        <span class="app-stat-label">Tokens used</span>
                                    </div>
                                </div>
                            </div>
                            <div class="app-card-actions">
                                <button class="btn-secondary btn-small" onclick="configureApp('face-analysis')">Configure</button>
                                <button class="btn-danger btn-small" onclick="deactivateApp('face-analysis')">Deactivate</button>
                            </div>
                        </div>
                        
                        <!-- Recommendations Engine -->
                        <div class="app-card" data-app="recommendations">
                            <div class="app-card-header">
                                <div class="app-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="app-status-badge active">Active</div>
                            </div>
                            <div class="app-card-content">
                                <h3 class="app-title">Smart Recommendations</h3>
                                <p class="app-description">AI-driven product recommendations based on customer preferences</p>
                                <div class="app-pricing">
                                    <span class="app-cost">2 tokens</span>
                                    <span class="app-cost-unit">per recommendation set</span>
                                </div>
                                <div class="app-stats">
                                    <div class="app-stat">
                                        <span class="app-stat-value">1,543</span>
                                        <span class="app-stat-label">Recommendations this month</span>
                                    </div>
                                    <div class="app-stat">
                                        <span class="app-stat-value">3,086</span>
                                        <span class="app-stat-label">Tokens used</span>
                                    </div>
                                </div>
                            </div>
                            <div class="app-card-actions">
                                <button class="btn-secondary btn-small" onclick="configureApp('recommendations')">Configure</button>
                                <button class="btn-danger btn-small" onclick="deactivateApp('recommendations')">Deactivate</button>
                            </div>
                        </div>
                        
                        <!-- PD Calculator -->
                        <div class="app-card" data-app="pd-calculator">
                            <div class="app-card-header">
                                <div class="app-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="app-status-badge inactive">Inactive</div>
                            </div>
                            <div class="app-card-content">
                                <h3 class="app-title">PD Calculator</h3>
                                <p class="app-description">Accurate pupillary distance measurement using computer vision</p>
                                <div class="app-pricing">
                                    <span class="app-cost">1 token</span>
                                    <span class="app-cost-unit">per measurement</span>
                                </div>
                                <div class="app-stats">
                                    <div class="app-stat">
                                        <span class="app-stat-value">0</span>
                                        <span class="app-stat-label">Measurements this month</span>
                                    </div>
                                    <div class="app-stat">
                                        <span class="app-stat-value">0</span>
                                        <span class="app-stat-label">Tokens used</span>
                                    </div>
                                </div>
                            </div>
                            <div class="app-card-actions">
                                <button class="btn-primary btn-small" onclick="activateApp('pd-calculator')">Activate</button>
                            </div>
                        </div>
                        
                        <!-- Style Advisor -->
                        <div class="app-card" data-app="style-advisor">
                            <div class="app-card-header">
                                <div class="app-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 2L3.09 8.26L12 14L20.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3.09 8.26L12 14.52L20.91 8.26" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M3.09 15.74L12 22L20.91 15.74" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="app-status-badge inactive">Inactive</div>
                            </div>
                            <div class="app-card-content">
                                <h3 class="app-title">Style Advisor</h3>
                                <p class="app-description">Personalized style recommendations based on lifestyle and preferences</p>
                                <div class="app-pricing">
                                    <span class="app-cost">4 tokens</span>
                                    <span class="app-cost-unit">per style consultation</span>
                                </div>
                                <div class="app-stats">
                                    <div class="app-stat">
                                        <span class="app-stat-value">0</span>
                                        <span class="app-stat-label">Consultations this month</span>
                                    </div>
                                    <div class="app-stat">
                                        <span class="app-stat-value">0</span>
                                        <span class="app-stat-label">Tokens used</span>
                                    </div>
                                </div>
                            </div>
                            <div class="app-card-actions">
                                <button class="btn-primary btn-small" onclick="activateApp('style-advisor')">Activate</button>
                            </div>
                        </div>
                        
                        <!-- Inventory Optimizer -->
                        <div class="app-card" data-app="inventory-optimizer">
                            <div class="app-card-header">
                                <div class="app-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M21 16V8C20.9996 7.64928 20.9071 7.30481 20.7315 7.00116C20.556 6.69751 20.3037 6.44536 20 6.27L13 2.27C12.696 2.09446 12.3511 2.00205 12 2.00205C11.6489 2.00205 11.304 2.09446 11 2.27L4 6.27C3.69626 6.44536 3.44398 6.69751 3.26846 7.00116C3.09294 7.30481 3.00036 7.64928 3 8V16C3.00036 16.3507 3.09294 16.6952 3.26846 16.9988C3.44398 17.3025 3.69626 17.5546 4 17.73L11 21.73C11.304 21.9055 11.6489 21.9979 12 21.9979C12.3511 21.9979 12.696 21.9055 13 21.73L20 17.73C20.3037 17.5546 20.556 17.3025 20.7315 16.9988C20.9071 16.6952 20.9996 16.3507 21 16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <polyline points="7.5,4.21 12,6.81 16.5,4.21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <polyline points="7.5,19.79 7.5,14.6 3,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <polyline points="21,12 16.5,14.6 16.5,19.79" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <polyline points="12,22.08 12,17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="app-status-badge inactive">Inactive</div>
                            </div>
                            <div class="app-card-content">
                                <h3 class="app-title">Inventory Optimizer</h3>
                                <p class="app-description">AI-powered inventory management and demand forecasting</p>
                                <div class="app-pricing">
                                    <span class="app-cost">10 tokens</span>
                                    <span class="app-cost-unit">per optimization report</span>
                                </div>
                                <div class="app-stats">
                                    <div class="app-stat">
                                        <span class="app-stat-value">0</span>
                                        <span class="app-stat-label">Reports this month</span>
                                    </div>
                                    <div class="app-stat">
                                        <span class="app-stat-value">0</span>
                                        <span class="app-stat-label">Tokens used</span>
                                    </div>
                                </div>
                            </div>
                            <div class="app-card-actions">
                                <button class="btn-primary btn-small" onclick="activateApp('inventory-optimizer')">Activate</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Billing Information -->
                    <div class="billing-section">
                        <h3 class="billing-title">Billing & Usage</h3>
                        <div class="billing-cards">
                            <div class="billing-card">
                                <div class="billing-card-header">
                                    <h4>Current Plan</h4>
                                    <span class="billing-plan-badge">Professional</span>
                                </div>
                                <div class="billing-card-content">
                                    <div class="billing-price">$199<span class="billing-period">/month</span></div>
                                    <div class="billing-features">
                                        <div class="billing-feature">✓ 10,000 tokens included</div>
                                        <div class="billing-feature">✓ All AI services</div>
                                        <div class="billing-feature">✓ Priority support</div>
                                        <div class="billing-feature">✓ Advanced analytics</div>
                                    </div>
                                </div>
                                <div class="billing-card-actions">
                                    <button class="btn-secondary btn-small" onclick="changePlan()">Change Plan</button>
                                </div>
                            </div>
                            
                            <div class="billing-card">
                                <div class="billing-card-header">
                                    <h4>Next Billing</h4>
                                    <span class="billing-date">Jan 15, 2025</span>
                                </div>
                                <div class="billing-card-content">
                                    <div class="billing-amount">$199.00</div>
                                    <div class="billing-method">
                                        <div class="billing-method-icon">💳</div>
                                        <div class="billing-method-text">•••• 4242</div>
                                    </div>
                                </div>
                                <div class="billing-card-actions">
                                    <button class="btn-secondary btn-small" onclick="updatePayment()">Update Payment</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Security Section -->
                <section id="security-section" class="settings-section">
                    <h2 class="settings-section-title">Security Settings</h2>
                    <p class="settings-section-description">
                        Manage your account security and access controls.
                    </p>
                    
                    <div class="settings-form-group">
                        <label for="currentPassword" class="settings-form-label">Current Password</label>
                        <input type="password" id="currentPassword" class="settings-form-input" placeholder="Enter your current password">
                    </div>
                    
                    <div class="settings-form-group">
                        <label for="newPassword" class="settings-form-label">New Password</label>
                        <input type="password" id="newPassword" class="settings-form-input" placeholder="Enter your new password">
                    </div>
                    
                    <div class="settings-form-group">
                        <label for="confirmPassword" class="settings-form-label">Confirm New Password</label>
                        <input type="password" id="confirmPassword" class="settings-form-input" placeholder="Confirm your new password">
                    </div>
                    
                    <button type="button" class="btn-primary" onclick="changePassword()">Change Password</button>
                    
                    <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--varai-border);">
                        <h3 style="color: var(--varai-error); margin-bottom: 1rem;">Danger Zone</h3>
                        <p style="color: var(--varai-gray-600); margin-bottom: 1.5rem;">
                            These actions are irreversible. Please proceed with caution.
                        </p>
                        <button type="button" class="btn-danger" onclick="deleteAccount()">Delete Account</button>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        // Customer settings functionality
        class CustomerSettings {
            constructor() {
                this.initializeSettings();
                this.loadCustomerData();
                this.loadSettingsData();
            }
            
            initializeSettings() {
                // Check authentication
                const authToken = localStorage.getItem('varai_customer_token');
                if (!authToken || !this.isValidToken(authToken)) {
                    window.location.href = 'login.html';
                    return;
                }
                
                // Handle URL hash for direct section access
                const hash = window.location.hash.substring(1);
                if (hash) {
                    this.showSection(hash);
                }
            }
            
            loadCustomerData() {
                const customerData = localStorage.getItem('varai_customer_data');
                if (customerData) {
                    try {
                        const data = JSON.parse(customerData);
                        this.updateUserInterface(data);
                        this.populateProfileForm(data);
                    } catch (error) {
                        console.error('Error parsing customer data:', error);
                        this.setDefaultUserData();
                    }
                } else {
                    this.setDefaultUserData();
                }
            }
            
            updateUserInterface(data) {
                const nameElement = document.getElementById('settingsUserName');
                const avatarElement = document.getElementById('settingsAvatar');
                
                if (nameElement) {
                    nameElement.textContent = data.name || 'Customer';
                }
                
                if (avatarElement) {
                    const initial = (data.name || 'C').charAt(0).toUpperCase();
                    avatarElement.textContent = initial;
                }
            }
            
            populateProfileForm(data) {
                // Populate form fields with customer data
                const companyName = document.getElementById('companyName');
                const contactEmail = document.getElementById('contactEmail');
                const businessType = document.getElementById('businessType');
                
                if (companyName) companyName.value = data.name || '';
                if (contactEmail) contactEmail.value = data.email || '';
                if (businessType) businessType.value = data.type || '';
            }
            
            setDefaultUserData() {
                const nameElement = document.getElementById('settingsUserName');
                const avatarElement = document.getElementById('settingsAvatar');
                
                if (nameElement) {
                    nameElement.textContent = 'Customer';
                }
                
                if (avatarElement) {
                    avatarElement.textContent = 'C';
                }
            }
            
            loadSettingsData() {
                // Load saved settings from localStorage or API
                const savedSettings = localStorage.getItem('varai_customer_settings');
                if (savedSettings) {
                    try {
                        const settings = JSON.parse(savedSettings);
                        this.applySettings(settings);
                    } catch (error) {
                        console.error('Error loading settings:', error);
                    }
                }
            }
            
            applySettings(settings) {
                // Apply notification preferences
                if (settings.notifications) {
                    Object.keys(settings.notifications).forEach(key => {
                        const toggle = document.querySelector(`[data-setting="${key}"]`);
                        if (toggle) {
                            toggle.classList.toggle('active', settings.notifications[key]);
                        }
                    });
                }
            }
            
            saveSettings() {
                const settings = {
                    notifications: {},
                    profile: {},
                    security: {}
                };
                
                // Collect notification settings
                document.querySelectorAll('.settings-switch').forEach(toggle => {
                    const setting = toggle.getAttribute('data-setting');
                    if (setting) {
                        settings.notifications[setting] = toggle.classList.contains('active');
                    }
                });
                
                localStorage.setItem('varai_customer_settings', JSON.stringify(settings));
            }
            
            isValidToken(token) {
                return token && token.startsWith('varai_') && token.length > 20;
            }
        }
        
        // Settings navigation
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.settings-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.settings-nav-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected section
            const section = document.getElementById(`${sectionName}-section`);
            if (section) {
                section.classList.add('active');
            }
            
            // Add active class to corresponding nav button
            const navButton = document.querySelector(`[onclick="showSection('${sectionName}')"]`);
            if (navButton) {
                navButton.classList.add('active');
            }
            
            // Update URL hash
            window.location.hash = sectionName;
        }
        
        // Toggle switch functionality
        function toggleSwitch(switchElement) {
            switchElement.classList.toggle('active');
            
            // Save settings
            if (window.customerSettings) {
                window.customerSettings.saveSettings();
            }
        }
        
        // Integration management
        function connectIntegration(platform) {
            alert(`Connecting to ${platform}...\n\nThis would open the ${platform} OAuth flow in a real implementation.`);
        }
        
        function configureIntegration(platform) {
            alert(`Configuring ${platform} integration...\n\nThis would open the configuration panel for ${platform}.`);
        }
        
        function disconnectIntegration(platform) {
            if (confirm(`Are you sure you want to disconnect ${platform}?\n\nThis will stop data synchronization and disable AI features for this platform.`)) {
                alert(`${platform} has been disconnected.`);
            }
        }
        
        // PMS Integration management with expandable rows
        function togglePMSRow(platform) {
            const row = document.querySelector(`[data-platform="${platform}"]`);
            const content = document.getElementById(`${platform}-content`);
            
            if (row && content) {
                row.classList.toggle('expanded');
                
                if (row.classList.contains('expanded')) {
                    content.style.maxHeight = content.scrollHeight + 'px';
                } else {
                    content.style.maxHeight = '0';
                }
            }
        }
        
        function connectPMSIntegration(platform) {
            // Show connection form inline
            const row = document.querySelector(`[data-platform="${platform}"]`);
            if (row) {
                // First expand the row
                togglePMSRow(platform);
                
                // Then update the content to show connection form
                const content = document.getElementById(`${platform}-content`);
                if (content) {
                    content.innerHTML = `
                        <div class="pms-integration-form">
                            <h4 style="margin-bottom: 1rem; color: var(--varai-foreground);">Connect ${getPlatformName(platform)}</h4>
                            <div class="settings-form-group">
                                <label class="settings-form-label">API Key</label>
                                <input type="password" class="settings-form-input" placeholder="Enter your ${getPlatformName(platform)} API key">
                            </div>
                            <div class="settings-form-group">
                                <label class="settings-form-label">Store URL</label>
                                <input type="url" class="settings-form-input" placeholder="https://your-store-url.com">
                            </div>
                            <div class="settings-form-group">
                                <label class="settings-form-label">Sync Frequency</label>
                                <select class="settings-form-input">
                                    <option value="realtime">Real-time</option>
                                    <option value="5min">Every 5 minutes</option>
                                    <option value="15min">Every 15 minutes</option>
                                    <option value="hourly">Hourly</option>
                                </select>
                            </div>
                            <div class="pms-integration-actions">
                                <button class="btn-primary btn-small" onclick="savePMSConnection('${platform}')">Connect</button>
                                <button class="btn-secondary btn-small" onclick="cancelPMSConnection('${platform}')">Cancel</button>
                            </div>
                        </div>
                    `;
                }
            }
        }
        
        function savePMSConnection(platform) {
            // Simulate saving connection
            const row = document.querySelector(`[data-platform="${platform}"]`);
            const statusBadge = row.querySelector('.integration-status-badge');
            
            // Update status to connected
            statusBadge.textContent = 'Connected';
            statusBadge.className = 'integration-status-badge connected';
            
            // Update content to show connected state
            const content = document.getElementById(`${platform}-content`);
            content.innerHTML = `
                <div class="pms-integration-form">
                    <div class="settings-form-group">
                        <label class="settings-form-label">API Key</label>
                        <input type="password" class="settings-form-input" value="••••••••••••••••" readonly>
                    </div>
                    <div class="settings-form-group">
                        <label class="settings-form-label">Store URL</label>
                        <input type="url" class="settings-form-input" value="https://your-store-url.com" readonly>
                    </div>
                    <div class="settings-form-group">
                        <label class="settings-form-label">Sync Frequency</label>
                        <select class="settings-form-input">
                            <option value="realtime" selected>Real-time</option>
                            <option value="5min">Every 5 minutes</option>
                            <option value="15min">Every 15 minutes</option>
                            <option value="hourly">Hourly</option>
                        </select>
                    </div>
                    <div class="pms-integration-actions">
                        <button class="btn-secondary btn-small" onclick="testPMSConnection('${platform}')">Test Connection</button>
                        <button class="btn-danger btn-small" onclick="disconnectPMS('${platform}')">Disconnect</button>
                    </div>
                </div>
            `;
            
            alert(`${getPlatformName(platform)} connected successfully!`);
        }
        
        function cancelPMSConnection(platform) {
            // Close the expanded row
            togglePMSRow(platform);
        }
        
        function testPMSConnection(platform) {
            alert(`Testing connection to ${getPlatformName(platform)}...\n\nConnection successful! ✓\n\nAll systems are synchronized and ready.`);
        }
        
        function disconnectPMS(platform) {
            const platformName = getPlatformName(platform);
            if (confirm(`Are you sure you want to disconnect ${platformName}?\n\nThis will stop all synchronization services.`)) {
                const row = document.querySelector(`[data-platform="${platform}"]`);
                const statusBadge = row.querySelector('.integration-status-badge');
                
                // Update status to disconnected
                statusBadge.textContent = 'Not Connected';
                statusBadge.className = 'integration-status-badge disconnected';
                
                // Close the expanded row
                togglePMSRow(platform);
                
                alert(`${platformName} has been disconnected successfully.`);
            }
        }
        
        function getPlatformName(platform) {
            const platformNames = {
                'occuco': 'Occuco PMS',
                'square': 'Square POS',
                'lightspeed': 'Lightspeed Retail',
                'clover': 'Clover POS',
                'vend': 'Vend POS',
                'revel': 'Revel Systems'
            };
            return platformNames[platform] || platform;
        }
        
        // API Key management
        function generateAPIKey() {
            const keyName = prompt('Enter a name for this API key:');
            if (keyName) {
                const newKey = 'varai_' + Math.random().toString(36).substr(2, 32);
                alert(`New API key generated: ${newKey}\n\nPlease save this key securely as it won't be shown again.`);
                
                // In a real implementation, this would make an API call
                // and update the UI with the new key
            }
        }
        
        function copyAPIKey(key) {
            navigator.clipboard.writeText(key).then(() => {
                alert('API key copied to clipboard!');
            }).catch(() => {
                alert('Failed to copy API key. Please copy it manually.');
            });
        }
        
        function revokeAPIKey(keyId) {
            if (confirm('Are you sure you want to revoke this API key?\n\nApplications using this key will stop working immediately.')) {
                alert('API key has been revoked.');
                // In a real implementation, this would make an API call
                // and remove the key from the UI
            }
        }
        
        // Profile form submission
        document.addEventListener('DOMContentLoaded', () => {
            const profileForm = document.getElementById('profileForm');
            if (profileForm) {
                profileForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    // Collect form data
                    const formData = new FormData(profileForm);
                    const profileData = Object.fromEntries(formData);
                    
                    // Save to localStorage (in real app, would send to API)
                    const customerData = JSON.parse(localStorage.getItem('varai_customer_data') || '{}');
                    Object.assign(customerData, profileData);
                    localStorage.setItem('varai_customer_data', JSON.stringify(customerData));
                    
                    alert('Profile settings saved successfully!');
                });
            }
        });
        
        // Security functions
        function changePassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                alert('Please fill in all password fields.');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert('New passwords do not match.');
                return;
            }
            
            if (newPassword.length < 8) {
                alert('New password must be at least 8 characters long.');
                return;
            }
            
            // In a real implementation, this would make an API call
            alert('Password changed successfully!');
            
            // Clear form
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }
        
        function deleteAccount() {
            const confirmation = prompt('This action cannot be undone. Type "DELETE" to confirm account deletion:');
            if (confirmation === 'DELETE') {
                alert('Account deletion would be processed here.\n\nFor demo purposes, your account will not actually be deleted.');
            }
        }
        
        // Logout functionality
        function logout() {
            if (confirm('Are you sure you want to sign out?')) {
                localStorage.removeItem('varai_customer_token');
                localStorage.removeItem('varai_customer_data');
                localStorage.removeItem('varai_customer_settings');
                window.location.href = 'login.html';
            }
        }
        
        // Connected Apps functionality
        function activateApp(appId) {
            const app = document.querySelector(`[data-app-id="${appId}"]`);
            if (!app) return;
            
            const activateBtn = app.querySelector('.app-activate-btn');
            const configureBtn = app.querySelector('.app-configure-btn');
            const statusBadge = app.querySelector('.app-status');
            
            // Update UI
            activateBtn.textContent = 'Activated';
            activateBtn.classList.add('activated');
            activateBtn.disabled = true;
            configureBtn.style.display = 'inline-block';
            statusBadge.textContent = 'Active';
            statusBadge.className = 'app-status active';
            
            // Show success message
            showNotification(`${getAppName(appId)} has been activated successfully!`, 'success');
            
            // Update token balance (simulate usage)
            updateTokenBalance();
        }
        
        function deactivateApp(appId) {
            if (!confirm('Are you sure you want to deactivate this app? This will stop all AI processing for this service.')) {
                return;
            }
            
            const app = document.querySelector(`[data-app-id="${appId}"]`);
            if (!app) return;
            
            const activateBtn = app.querySelector('.app-activate-btn');
            const configureBtn = app.querySelector('.app-configure-btn');
            const statusBadge = app.querySelector('.app-status');
            
            // Update UI
            activateBtn.textContent = 'Activate';
            activateBtn.classList.remove('activated');
            activateBtn.disabled = false;
            configureBtn.style.display = 'none';
            statusBadge.textContent = 'Inactive';
            statusBadge.className = 'app-status inactive';
            
            showNotification(`${getAppName(appId)} has been deactivated.`, 'info');
        }
        
        function configureApp(appId) {
            const appName = getAppName(appId);
            alert(`Opening configuration for ${appName}...\n\nThis would open the configuration panel with settings like:\n- API endpoints\n- Processing parameters\n- Webhook URLs\n- Custom rules and filters`);
        }
        
        function viewAppUsage(appId) {
            const appName = getAppName(appId);
            const usage = getAppUsage(appId);
            alert(`${appName} Usage Statistics:\n\n• Total API calls: ${usage.calls}\n• Tokens consumed: ${usage.tokens}\n• Success rate: ${usage.successRate}%\n• Last used: ${usage.lastUsed}\n• Monthly cost: $${usage.monthlyCost}`);
        }
        
        function getAppName(appId) {
            const names = {
                'virtual-tryon': 'Virtual Try-On',
                'face-analysis': 'Face Analysis',
                'recommendations': 'Smart Recommendations',
                'pd-calculator': 'PD Calculator',
                'style-advisor': 'Style Advisor',
                'inventory-optimizer': 'Inventory Optimizer'
            };
            return names[appId] || appId;
        }
        
        function getAppUsage(appId) {
            // Simulate usage data
            const baseUsage = {
                calls: Math.floor(Math.random() * 10000) + 1000,
                successRate: Math.floor(Math.random() * 10) + 90,
                lastUsed: new Date().toLocaleDateString(),
                monthlyCost: (Math.random() * 500 + 50).toFixed(2)
            };
            
            const tokenCosts = {
                'virtual-tryon': 5,
                'face-analysis': 3,
                'recommendations': 2,
                'pd-calculator': 1,
                'style-advisor': 4,
                'inventory-optimizer': 10
            };
            
            baseUsage.tokens = baseUsage.calls * (tokenCosts[appId] || 2);
            return baseUsage;
        }
        
        function updateTokenBalance() {
            const balanceElement = document.querySelector('.token-balance-amount');
            if (balanceElement) {
                const currentBalance = parseInt(balanceElement.textContent.replace(/,/g, ''));
                const newBalance = Math.max(0, currentBalance - Math.floor(Math.random() * 100 + 10));
                balanceElement.textContent = newBalance.toLocaleString();
                
                // Update progress bar
                const progressBar = document.querySelector('.token-usage-progress');
                if (progressBar) {
                    const usagePercent = Math.min(100, ((10000 - newBalance) / 10000) * 100);
                    progressBar.style.width = usagePercent + '%';
                }
            }
        }
        
        function addTokens() {
            alert('Redirecting to billing page...\n\nThis would open the Stripe billing interface where you can:\n• Purchase additional tokens\n• Upgrade your plan\n• View billing history\n• Manage payment methods');
        }
        
        function manageBilling() {
            alert('Opening billing management...\n\nThis would show:\n• Current plan details\n• Usage analytics\n• Billing history\n• Payment methods\n• Plan upgrade options');
        }
        
        function viewBillingHistory() {
            alert('Billing History:\n\n• Dec 2024: $199.00 (Professional Plan)\n• Nov 2024: $199.00 (Professional Plan)\n• Oct 2024: $29.00 (Starter Plan)\n• Sep 2024: $29.00 (Starter Plan)\n\nTotal spent: $456.00');
        }
        
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-message">${message}</span>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">×</button>
                </div>
            `;
            
            // Add to page
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // Initialize settings when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.customerSettings = new CustomerSettings();
        });
    </script>
</body>
</html>
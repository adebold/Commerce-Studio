<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VARAi Admin Portal - Customer Management</title>
    <link rel="stylesheet" href="../css/varai-design-system.css">
    <link rel="stylesheet" href="../css/enterprise-enhancements.css">
    <style>
        .admin-container {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--varai-background) 0%, var(--varai-gray-50) 100%);
        }
        
        .admin-navbar {
            background: var(--varai-background);
            border-bottom: 1px solid var(--varai-border);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .admin-nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .admin-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--varai-primary);
            text-decoration: none;
            background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .admin-nav-links {
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .admin-nav-link {
            color: var(--varai-gray-600);
            text-decoration: none;
            font-weight: 500;
            transition: var(--varai-transition);
            padding: 0.5rem 1rem;
            border-radius: 6px;
        }
        
        .admin-nav-link:hover,
        .admin-nav-link.active {
            color: var(--varai-accent);
            background: rgba(30, 150, 252, 0.1);
        }
        
        .admin-main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .admin-header {
            margin-bottom: 2rem;
        }
        
        .admin-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--varai-foreground);
            margin-bottom: 0.5rem;
        }
        
        .admin-subtitle {
            color: var(--varai-gray-600);
            font-size: 1.1rem;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--varai-background);
            border: 1px solid var(--varai-border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: var(--varai-transition);
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--varai-shadow-lg);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--varai-primary);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: var(--varai-gray-600);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-change {
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }
        
        .stat-change.positive {
            color: var(--varai-success);
        }
        
        .stat-change.negative {
            color: var(--varai-error);
        }
        
        .admin-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        .customers-section {
            background: var(--varai-background);
            border: 1px solid var(--varai-border);
            border-radius: 12px;
            padding: 2rem;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--varai-foreground);
        }
        
        .search-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .search-input {
            padding: 0.75rem 1rem;
            border: 1px solid var(--varai-border);
            border-radius: 8px;
            font-size: 0.9rem;
            background: var(--varai-background);
            color: var(--varai-foreground);
            min-width: 300px;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--varai-accent);
            box-shadow: 0 0 0 3px rgba(30, 150, 252, 0.1);
        }
        
        .filter-select {
            padding: 0.75rem 1rem;
            border: 1px solid var(--varai-border);
            border-radius: 8px;
            background: var(--varai-background);
            color: var(--varai-foreground);
            cursor: pointer;
        }
        
        .customers-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .customers-table th,
        .customers-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--varai-border);
        }
        
        .customers-table th {
            background: var(--varai-gray-50);
            font-weight: 600;
            color: var(--varai-foreground);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .customers-table td {
            color: var(--varai-gray-700);
        }
        
        .customer-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .customer-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .customer-details h4 {
            margin: 0;
            color: var(--varai-foreground);
            font-weight: 600;
        }
        
        .customer-details p {
            margin: 0;
            color: var(--varai-gray-600);
            font-size: 0.9rem;
        }
        
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-badge.active {
            background: rgba(48, 209, 88, 0.1);
            color: var(--varai-success);
        }
        
        .status-badge.inactive {
            background: rgba(255, 59, 48, 0.1);
            color: var(--varai-error);
        }
        
        .status-badge.trial {
            background: rgba(255, 149, 0, 0.1);
            color: #ff9500;
        }
        
        .plan-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            background: linear-gradient(135deg, var(--varai-primary) 0%, var(--varai-accent) 100%);
            color: white;
        }
        
        .usage-bar {
            width: 100px;
            height: 6px;
            background: var(--varai-gray-200);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .usage-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--varai-success) 0%, var(--varai-primary) 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .usage-text {
            font-size: 0.8rem;
            color: var(--varai-gray-600);
            margin-top: 0.25rem;
        }
        
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .btn-action {
            padding: 0.5rem 1rem;
            border: 1px solid var(--varai-border);
            background: var(--varai-background);
            color: var(--varai-foreground);
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--varai-transition);
        }
        
        .btn-action:hover {
            background: var(--varai-gray-50);
            border-color: var(--varai-primary);
        }
        
        .btn-action.primary {
            background: var(--varai-primary);
            color: white;
            border-color: var(--varai-primary);
        }
        
        .btn-action.primary:hover {
            background: #5a67d8;
        }
        
        .btn-action.danger {
            background: var(--varai-error);
            color: white;
            border-color: var(--varai-error);
        }
        
        .btn-action.danger:hover {
            background: #dc2626;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .pagination-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--varai-border);
            background: var(--varai-background);
            color: var(--varai-foreground);
            border-radius: 6px;
            cursor: pointer;
            transition: var(--varai-transition);
        }
        
        .pagination-btn:hover {
            background: var(--varai-gray-50);
        }
        
        .pagination-btn.active {
            background: var(--varai-primary);
            color: white;
            border-color: var(--varai-primary);
        }
        
        .pagination-info {
            color: var(--varai-gray-600);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .admin-main {
                padding: 1rem;
            }
            
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .search-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-input {
                min-width: auto;
            }
            
            .customers-table {
                font-size: 0.8rem;
            }
            
            .customers-table th,
            .customers-table td {
                padding: 0.75rem 0.5rem;
            }
        }

        /* Toggle Switch Styles */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--varai-gray-300);
            transition: 0.3s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--varai-primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Chart Styles */
        .chart-container {
            position: relative;
            height: 100px;
            margin-top: 1rem;
        }

        /* Additional responsive styles */
        @media (max-width: 1200px) {
            .analytics-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
            }
        }

        @media (max-width: 768px) {
            .analytics-grid {
                grid-template-columns: 1fr !important;
            }
            
            .search-controls {
                flex-wrap: wrap;
            }
            
            .filter-select {
                min-width: 120px;
            }
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.show .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--varai-gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--varai-primary), var(--varai-secondary));
            color: white;
            border-radius: 12px 12px 0 0;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }

        .modal-close:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            padding: 2rem;
        }

        .customer-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .detail-section {
            background: var(--varai-gray-50);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--varai-gray-200);
        }

        .detail-section h3 {
            margin: 0 0 1rem 0;
            color: var(--varai-primary);
            font-size: 1.1rem;
            font-weight: 600;
            border-bottom: 2px solid var(--varai-primary);
            padding-bottom: 0.5rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            padding: 0.5rem 0;
        }

        .detail-item:last-child {
            margin-bottom: 0;
        }

        .detail-item label {
            font-weight: 500;
            color: var(--varai-gray-700);
            min-width: 120px;
        }

        .detail-item span {
            color: var(--varai-gray-900);
            font-weight: 500;
        }

        .detail-item input,
        .detail-item select {
            padding: 0.5rem;
            border: 1px solid var(--varai-gray-300);
            border-radius: 4px;
            font-size: 0.9rem;
            min-width: 150px;
        }

        .detail-item input:focus,
        .detail-item select:focus {
            outline: none;
            border-color: var(--varai-primary);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }

        .plan-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .plan-badge.starter {
            background-color: #e0f2fe;
            color: #0277bd;
        }

        .plan-badge.professional {
            background-color: #f3e5f5;
            color: #7b1fa2;
        }

        .plan-badge.enterprise {
            background-color: #e8f5e8;
            color: #2e7d32;
        }

        .modal-footer {
            padding: 1.5rem 2rem;
            border-top: 1px solid var(--varai-gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            background: var(--varai-gray-50);
            border-radius: 0 0 12px 12px;
        }

        .modal-footer .btn-action {
            min-width: 120px;
        }

        /* Responsive modal */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                margin: 1rem;
            }

            .customer-details-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .modal-header,
            .modal-body,
            .modal-footer {
                padding: 1rem;
            }

            .detail-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .detail-item label {
                min-width: auto;
            }

            .detail-item input,
            .detail-item select {
                width: 100%;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Navigation -->
        <nav class="admin-navbar">
            <div class="admin-nav-content">
                <a href="#" class="admin-logo">VARAi Admin</a>
                <div class="admin-nav-links">
                    <a href="#" class="admin-nav-link active" onclick="showSection('customers')">Customers</a>
                    <a href="#" class="admin-nav-link" onclick="showSection('analytics')">Platform Analytics</a>
                    <a href="#" class="admin-nav-link" onclick="showSection('security')">Security Reports</a>
                    <a href="#" class="admin-nav-link" onclick="showSection('compliance')">SOC2/HIPAA</a>
                    <a href="#" class="admin-nav-link" onclick="showSection('billing')">Billing</a>
                    <a href="#" class="admin-nav-link" onclick="showSection('settings')">Settings</a>
                    <a href="../customer/login.html" class="admin-nav-link">Logout</a>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Header -->
            <div class="admin-header">
                <h1 class="admin-title">Customer Management</h1>
                <p class="admin-subtitle">Manage customer accounts, subscriptions, and usage across the VARAi platform</p>
            </div>

            <!-- Statistics -->
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-value">1,247</div>
                    <div class="stat-label">Total Customers</div>
                    <div class="stat-change positive">+12% this month</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">892</div>
                    <div class="stat-label">Active Subscriptions</div>
                    <div class="stat-change positive">+8% this month</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">$47,320</div>
                    <div class="stat-label">Monthly Revenue</div>
                    <div class="stat-change positive">+15% this month</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">2.4M</div>
                    <div class="stat-label">Tokens Consumed</div>
                    <div class="stat-change positive">+22% this month</div>
                </div>
            </div>

            <!-- Customers Section -->
            <div class="admin-content">
                <div class="customers-section" id="customers-section">
                    <div class="section-header">
                        <h2 class="section-title">Customer Accounts</h2>
                        <div class="search-controls">
                            <input type="text" class="search-input" placeholder="Search customers..." id="customerSearch">
                            <select class="filter-select" id="statusFilter">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="trial">Trial</option>
                                <option value="inactive">Inactive</option>
                            </select>
                            <select class="filter-select" id="planFilter">
                                <option value="">All Plans</option>
                                <option value="starter">Starter</option>
                                <option value="professional">Professional</option>
                                <option value="enterprise">Enterprise</option>
                            </select>
                        </div>
                    </div>

                    <table class="customers-table">
                        <thead>
                            <tr>
                                <th>Customer</th>
                                <th>Plan</th>
                                <th>Status</th>
                                <th>Token Usage</th>
                                <th>Monthly Spend</th>
                                <th>Last Active</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="customersTableBody">
                            <!-- Customer rows will be populated by JavaScript -->
                        </tbody>
                    </table>

                    <div class="pagination">
                        <button class="pagination-btn" onclick="changePage(-1)">Previous</button>
                        <span class="pagination-info">Page 1 of 25</span>
                        <button class="pagination-btn" onclick="changePage(1)">Next</button>
                    </div>
                </div>

                <!-- Platform Analytics Section -->
                <div class="customers-section" id="analytics-section" style="display: none;">
                    <div class="section-header">
                        <h2 class="section-title">Platform Analytics & Usage Reports</h2>
                        <div class="search-controls">
                            <select class="filter-select" id="analyticsTimeRange">
                                <option value="7d">Last 7 Days</option>
                                <option value="30d" selected>Last 30 Days</option>
                                <option value="90d">Last 90 Days</option>
                                <option value="1y">Last Year</option>
                            </select>
                            <button class="btn-action primary" onclick="exportAnalytics()">Export Report</button>
                        </div>
                    </div>

                    <!-- Analytics Grid -->
                    <div class="analytics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="stat-card">
                            <h3 style="margin: 0 0 1rem 0; color: var(--varai-foreground);">API Usage</h3>
                            <div class="stat-value">2.4M</div>
                            <div class="stat-label">Total API Calls</div>
                            <div class="stat-change positive">+22% vs last month</div>
                            <canvas id="apiUsageChart" width="250" height="100" style="margin-top: 1rem;"></canvas>
                        </div>
                        <div class="stat-card">
                            <h3 style="margin: 0 0 1rem 0; color: var(--varai-foreground);">Storage Usage</h3>
                            <div class="stat-value">847GB</div>
                            <div class="stat-label">Total Storage</div>
                            <div class="stat-change positive">+8% vs last month</div>
                            <div class="usage-bar" style="margin-top: 1rem;">
                                <div class="usage-fill" style="width: 68%;"></div>
                            </div>
                            <div class="usage-text">847GB / 1.2TB allocated</div>
                        </div>
                        <div class="stat-card">
                            <h3 style="margin: 0 0 1rem 0; color: var(--varai-foreground);">Active Integrations</h3>
                            <div class="stat-value">156</div>
                            <div class="stat-label">Connected Apps</div>
                            <div class="stat-change positive">+12 new this month</div>
                            <div style="margin-top: 1rem; font-size: 0.9rem; color: var(--varai-gray-600);">
                                <div>Shopify: 89 stores</div>
                                <div>Magento: 34 stores</div>
                                <div>BigCommerce: 21 stores</div>
                                <div>WooCommerce: 12 stores</div>
                            </div>
                        </div>
                    </div>

                    <!-- Detailed Analytics Table -->
                    <table class="customers-table">
                        <thead>
                            <tr>
                                <th>Customer</th>
                                <th>API Calls (30d)</th>
                                <th>Storage Used</th>
                                <th>Integrations</th>
                                <th>Uptime</th>
                                <th>Performance Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Acme Eyewear Co.</td>
                                <td>125,430</td>
                                <td>45.2GB</td>
                                <td>3 (Shopify, Magento, Analytics)</td>
                                <td><span class="status-badge active">99.9%</span></td>
                                <td><span class="plan-badge">A+</span></td>
                            </tr>
                            <tr>
                                <td>Vision Plus Store</td>
                                <td>892,150</td>
                                <td>234.7GB</td>
                                <td>5 (All platforms + Custom)</td>
                                <td><span class="status-badge active">99.8%</span></td>
                                <td><span class="plan-badge">A</span></td>
                            </tr>
                            <tr>
                                <td>Optical Boutique</td>
                                <td>12,890</td>
                                <td>8.3GB</td>
                                <td>1 (Shopify)</td>
                                <td><span class="status-badge active">99.5%</span></td>
                                <td><span class="plan-badge">B+</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Security Reports Section -->
                <div class="customers-section" id="security-section" style="display: none;">
                    <div class="section-header">
                        <h2 class="section-title">Security Reports & Monitoring</h2>
                        <div class="search-controls">
                            <select class="filter-select" id="securityTimeRange">
                                <option value="24h">Last 24 Hours</option>
                                <option value="7d" selected>Last 7 Days</option>
                                <option value="30d">Last 30 Days</option>
                            </select>
                            <button class="btn-action primary" onclick="exportSecurityReport()">Export Security Report</button>
                        </div>
                    </div>

                    <!-- Security Overview -->
                    <div class="analytics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="stat-card">
                            <div class="stat-value" style="color: var(--varai-success);">0</div>
                            <div class="stat-label">Critical Vulnerabilities</div>
                            <div class="stat-change positive">No issues detected</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" style="color: var(--varai-success);">99.9%</div>
                            <div class="stat-label">Security Score</div>
                            <div class="stat-change positive">+0.1% this week</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">2,847</div>
                            <div class="stat-label">Blocked Threats</div>
                            <div class="stat-change positive">-15% vs last week</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">100%</div>
                            <div class="stat-label">SSL Coverage</div>
                            <div class="stat-change positive">All endpoints secured</div>
                        </div>
                    </div>

                    <!-- Security Events Table -->
                    <table class="customers-table">
                        <thead>
                            <tr>
                                <th>Timestamp</th>
                                <th>Event Type</th>
                                <th>Severity</th>
                                <th>Source IP</th>
                                <th>Target</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-12-26 23:15:42</td>
                                <td>Failed Login Attempt</td>
                                <td><span class="status-badge trial">Medium</span></td>
                                <td>192.168.1.100</td>
                                <td>/admin/login</td>
                                <td><span class="status-badge active">Blocked</span></td>
                                <td><button class="btn-action" onclick="adminPortal.showSecurityEventModal(1)">Details</button></td>
                            </tr>
                            <tr>
                                <td>2024-12-26 22:45:12</td>
                                <td>Rate Limit Exceeded</td>
                                <td><span class="status-badge trial">Low</span></td>
                                <td>203.0.113.45</td>
                                <td>/api/v1/products</td>
                                <td><span class="status-badge active">Throttled</span></td>
                                <td><button class="btn-action" onclick="adminPortal.showSecurityEventModal(2)">Details</button></td>
                            </tr>
                            <tr>
                                <td>2024-12-26 21:30:08</td>
                                <td>Suspicious API Pattern</td>
                                <td><span class="status-badge trial">Medium</span></td>
                                <td>198.51.100.23</td>
                                <td>/api/v1/users</td>
                                <td><span class="status-badge active">Monitored</span></td>
                                <td><button class="btn-action" onclick="adminPortal.showSecurityEventModal(3)">Details</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- SOC2/HIPAA Compliance Section -->
                <div class="customers-section" id="compliance-section" style="display: none;">
                    <div class="section-header">
                        <h2 class="section-title">SOC2 & HIPAA Compliance Reports</h2>
                        <div class="search-controls">
                            <select class="filter-select" id="complianceType">
                                <option value="soc2" selected>SOC2 Type II</option>
                                <option value="hipaa">HIPAA</option>
                                <option value="gdpr">GDPR</option>
                                <option value="ccpa">CCPA</option>
                            </select>
                            <button class="btn-action primary" onclick="generateComplianceReport()">Generate Report</button>
                        </div>
                    </div>

                    <!-- Compliance Overview -->
                    <div class="analytics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="stat-card">
                            <h3 style="margin: 0 0 1rem 0; color: var(--varai-foreground);">SOC2 Type II Status</h3>
                            <div class="stat-value" style="color: var(--varai-success);">Compliant</div>
                            <div class="stat-label">Last Audit: Nov 2024</div>
                            <div class="stat-change positive">Next audit: May 2025</div>
                            <div style="margin-top: 1rem;">
                                <div style="font-size: 0.9rem; color: var(--varai-gray-600);">
                                    <div>âœ… Security Controls: 100%</div>
                                    <div>âœ… Availability: 99.9%</div>
                                    <div>âœ… Processing Integrity: 100%</div>
                                    <div>âœ… Confidentiality: 100%</div>
                                    <div>âœ… Privacy: 100%</div>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <h3 style="margin: 0 0 1rem 0; color: var(--varai-foreground);">HIPAA Compliance</h3>
                            <div class="stat-value" style="color: var(--varai-success);">Compliant</div>
                            <div class="stat-label">Last Assessment: Dec 2024</div>
                            <div class="stat-change positive">Risk Assessment: Low</div>
                            <div style="margin-top: 1rem;">
                                <div style="font-size: 0.9rem; color: var(--varai-gray-600);">
                                    <div>âœ… Administrative Safeguards</div>
                                    <div>âœ… Physical Safeguards</div>
                                    <div>âœ… Technical Safeguards</div>
                                    <div>âœ… Breach Notification</div>
                                    <div>âœ… Business Associate Agreements</div>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <h3 style="margin: 0 0 1rem 0; color: var(--varai-foreground);">Data Protection</h3>
                            <div class="stat-value">AES-256</div>
                            <div class="stat-label">Encryption Standard</div>
                            <div class="stat-change positive">100% data encrypted</div>
                            <div style="margin-top: 1rem;">
                                <div style="font-size: 0.9rem; color: var(--varai-gray-600);">
                                    <div>ðŸ”’ Data at Rest: Encrypted</div>
                                    <div>ðŸ”’ Data in Transit: TLS 1.3</div>
                                    <div>ðŸ”’ Key Management: HSM</div>
                                    <div>ðŸ”’ Access Logs: Complete</div>
                                    <div>ðŸ”’ Backup Encryption: Yes</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Compliance Audit Trail -->
                    <table class="customers-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Compliance Type</th>
                                <th>Control Area</th>
                                <th>Status</th>
                                <th>Auditor</th>
                                <th>Next Review</th>
                                <th>Report</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-11-15</td>
                                <td>SOC2 Type II</td>
                                <td>Security Controls</td>
                                <td><span class="status-badge active">Passed</span></td>
                                <td>Deloitte & Touche</td>
                                <td>2025-05-15</td>
                                <td><button class="btn-action primary" onclick="downloadReport('soc2-2024')">Download</button></td>
                            </tr>
                            <tr>
                                <td>2024-12-01</td>
                                <td>HIPAA</td>
                                <td>Technical Safeguards</td>
                                <td><span class="status-badge active">Compliant</span></td>
                                <td>Internal Audit</td>
                                <td>2025-06-01</td>
                                <td><button class="btn-action primary" onclick="downloadReport('hipaa-2024')">Download</button></td>
                            </tr>
                            <tr>
                                <td>2024-10-20</td>
                                <td>GDPR</td>
                                <td>Data Processing</td>
                                <td><span class="status-badge active">Compliant</span></td>
                                <td>Privacy Officer</td>
                                <td>2025-04-20</td>
                                <td><button class="btn-action primary" onclick="downloadReport('gdpr-2024')">Download</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Billing Section -->
                <div class="customers-section" id="billing-section" style="display: none;">
                    <div class="section-header">
                        <h2 class="section-title">Billing & Revenue Management</h2>
                        <div class="search-controls">
                            <select class="filter-select" id="billingTimeRange">
                                <option value="current">Current Month</option>
                                <option value="last" selected>Last Month</option>
                                <option value="quarter">This Quarter</option>
                                <option value="year">This Year</option>
                            </select>
                            <button class="btn-action primary" onclick="exportBillingReport()">Export Billing Report</button>
                        </div>
                    </div>

                    <!-- Revenue Overview -->
                    <div class="analytics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="stat-card">
                            <div class="stat-value">$47,320</div>
                            <div class="stat-label">Monthly Revenue</div>
                            <div class="stat-change positive">+15% vs last month</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">$142,960</div>
                            <div class="stat-label">Quarterly Revenue</div>
                            <div class="stat-change positive">+22% vs last quarter</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">2.3%</div>
                            <div class="stat-label">Churn Rate</div>
                            <div class="stat-change positive">-0.5% improvement</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">$189</div>
                            <div class="stat-label">Average Revenue Per User</div>
                            <div class="stat-change positive">+8% vs last month</div>
                        </div>
                    </div>

                    <!-- Billing Details Table -->
                    <table class="customers-table">
                        <thead>
                            <tr>
                                <th>Customer</th>
                                <th>Plan</th>
                                <th>Monthly Spend</th>
                                <th>Usage Overage</th>
                                <th>Payment Status</th>
                                <th>Next Billing</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Acme Eyewear Co.</td>
                                <td>Professional</td>
                                <td>$199.00</td>
                                <td>$0.00</td>
                                <td><span class="status-badge active">Paid</span></td>
                                <td>2025-01-15</td>
                                <td><button class="btn-action" onclick="viewBilling(1)">View Invoice</button></td>
                            </tr>
                            <tr>
                                <td>Vision Plus Store</td>
                                <td>Enterprise</td>
                                <td>$999.00</td>
                                <td>$150.00</td>
                                <td><span class="status-badge active">Paid</span></td>
                                <td>2025-01-20</td>
                                <td><button class="btn-action" onclick="viewBilling(2)">View Invoice</button></td>
                            </tr>
                            <tr>
                                <td>Optical Boutique</td>
                                <td>Starter</td>
                                <td>$0.00</td>
                                <td>$0.00</td>
                                <td><span class="status-badge trial">Trial</span></td>
                                <td>2025-01-20</td>
                                <td><button class="btn-action" onclick="viewBilling(3)">Convert</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Settings Section -->
                <div class="customers-section" id="settings-section" style="display: none;">
                    <div class="section-header">
                        <h2 class="section-title">Platform Settings</h2>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem;">
                        <div class="stat-card">
                            <h3 style="margin: 0 0 1rem 0; color: var(--varai-foreground);">System Configuration</h3>
                            <div style="display: flex; flex-direction: column; gap: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>Maintenance Mode</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="maintenanceMode">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>Auto-scaling</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="autoScaling" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>Debug Logging</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="debugLogging">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <h3 style="margin: 0 0 1rem 0; color: var(--varai-foreground);">Security Settings</h3>
                            <div style="display: flex; flex-direction: column; gap: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>Two-Factor Authentication</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="twoFactorAuth" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>IP Whitelisting</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="ipWhitelisting" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>Session Timeout (30 min)</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="sessionTimeout" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Sample customer data
        const customers = [
            {
                id: 1,
                name: "Acme Eyewear Co.",
                email: "admin@acmeeyewear.com",
                plan: "Professional",
                status: "Active",
                tokensUsed: 8500,
                tokensLimit: 10000,
                tokenLimit: 10000,
                monthlySpend: 199,
                lastActive: "2024-12-26",
                joinDate: "2024-01-15",
                apiCalls: 125000,
                storageUsed: "2.4 GB",
                revenue: "199",
                lastPayment: "2024-12-01",
                nextBilling: "2025-01-01",
                paymentMethod: "Visa ****4532",
                integrations: "Shopify, Stripe, Mailchimp",
                lastActivity: "2 hours ago"
            },
            {
                id: 2,
                name: "Vision Plus Store",
                email: "contact@visionplus.com",
                plan: "Enterprise",
                status: "Active",
                tokensUsed: 45000,
                tokensLimit: 100000,
                tokenLimit: 100000,
                monthlySpend: 999,
                lastActive: "2024-12-25",
                joinDate: "2023-11-20",
                apiCalls: 890000,
                storageUsed: "15.7 GB",
                revenue: "999",
                lastPayment: "2024-12-15",
                nextBilling: "2025-01-15",
                paymentMethod: "Mastercard ****8901",
                integrations: "Shopify, Magento, WooCommerce, Stripe",
                lastActivity: "30 minutes ago"
            },
            {
                id: 3,
                name: "Optical Boutique",
                email: "info@opticalboutique.com",
                plan: "Starter",
                status: "Pending",
                tokensUsed: 750,
                tokensLimit: 1000,
                tokenLimit: 1000,
                monthlySpend: 0,
                lastActive: "2024-12-24",
                joinDate: "2024-12-20",
                apiCalls: 2500,
                storageUsed: "0.1 GB",
                revenue: "0",
                lastPayment: "N/A",
                nextBilling: "2025-01-20",
                paymentMethod: "Trial Account",
                integrations: "Shopify",
                lastActivity: "1 day ago"
            },
            {
                id: 4,
                name: "EyeStyle Fashion",
                email: "hello@eyestyle.com",
                plan: "Professional",
                status: "Active",
                tokensUsed: 6200,
                tokensLimit: 10000,
                tokenLimit: 10000,
                monthlySpend: 199,
                lastActive: "2024-12-26",
                joinDate: "2024-03-10",
                apiCalls: 78000,
                storageUsed: "1.8 GB",
                revenue: "199",
                lastPayment: "2024-12-10",
                nextBilling: "2025-01-10",
                paymentMethod: "Amex ****2345",
                integrations: "BigCommerce, Stripe",
                lastActivity: "4 hours ago"
            },
            {
                id: 5,
                name: "Metro Optics",
                email: "support@metrooptics.com",
                plan: "Starter",
                status: "Suspended",
                tokensUsed: 0,
                tokensLimit: 1000,
                tokenLimit: 1000,
                monthlySpend: 0,
                lastActive: "2024-11-15",
                joinDate: "2024-10-05",
                apiCalls: 0,
                storageUsed: "0.0 GB",
                revenue: "0",
                lastPayment: "2024-10-05",
                nextBilling: "Suspended",
                paymentMethod: "Payment Failed",
                integrations: "None",
                lastActivity: "41 days ago"
            }
        ];

        let currentPage = 1;
        let filteredCustomers = [...customers];

        function renderCustomers() {
            const tbody = document.getElementById('customersTableBody');
            tbody.innerHTML = '';

            filteredCustomers.forEach(customer => {
                const usagePercent = (customer.tokensUsed / customer.tokensLimit) * 100;
                const initials = customer.name.split(' ').map(word => word[0]).join('').substring(0, 2);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="customer-info">
                            <div class="customer-avatar">${initials}</div>
                            <div class="customer-details">
                                <h4>${customer.name}</h4>
                                <p>${customer.email}</p>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="plan-badge">${customer.plan}</span>
                    </td>
                    <td>
                        <span class="status-badge ${customer.status}">${customer.status}</span>
                    </td>
                    <td>
                        <div class="usage-bar">
                            <div class="usage-fill" style="width: ${usagePercent}%"></div>
                        </div>
                        <div class="usage-text">${customer.tokensUsed.toLocaleString()} / ${customer.tokensLimit.toLocaleString()}</div>
                    </td>
                    <td>$${customer.monthlySpend}</td>
                    <td>${new Date(customer.lastActive).toLocaleDateString()}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-action primary" onclick="viewCustomer(${customer.id})">View</button>
                            <button class="btn-action" onclick="editCustomer(${customer.id})">Edit</button>
                            <button class="btn-action danger" onclick="suspendCustomer(${customer.id})">Suspend</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function filterCustomers() {
            const searchTerm = document.getElementById('customerSearch').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const planFilter = document.getElementById('planFilter').value;

            filteredCustomers = customers.filter(customer => {
                const matchesSearch = customer.name.toLowerCase().includes(searchTerm) || 
                                    customer.email.toLowerCase().includes(searchTerm);
                const matchesStatus = !statusFilter || customer.status === statusFilter;
                const matchesPlan = !planFilter || customer.plan.toLowerCase() === planFilter;

                return matchesSearch && matchesStatus && matchesPlan;
            });

            renderCustomers();
        }

        function viewCustomer(customerId) {
            const customer = customers.find(c => c.id === customerId);
            showCustomerModal(customer, 'view');
        }

        function editCustomer(customerId) {
            const customer = customers.find(c => c.id === customerId);
            showCustomerModal(customer, 'edit');
        }

        function showCustomerModal(customer, mode) {
            const isEdit = mode === 'edit';
            const modalTitle = isEdit ? `Edit Customer: ${customer.name}` : `Customer Details: ${customer.name}`;
            
            // Create modal HTML
            const modalHTML = `
                <div id="customerModal" class="modal-overlay" onclick="closeCustomerModal(event)">
                    <div class="modal-content" onclick="event.stopPropagation()">
                        <div class="modal-header">
                            <h2>${modalTitle}</h2>
                            <button class="modal-close" onclick="closeCustomerModal()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="customer-details-grid">
                                <div class="detail-section">
                                    <h3>Account Information</h3>
                                    <div class="detail-item">
                                        <label>Customer ID:</label>
                                        <span>${customer.id}</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>Name:</label>
                                        ${isEdit ? `<input type="text" value="${customer.name}" id="edit-name">` : `<span>${customer.name}</span>`}
                                    </div>
                                    <div class="detail-item">
                                        <label>Email:</label>
                                        ${isEdit ? `<input type="email" value="${customer.email}" id="edit-email">` : `<span>${customer.email}</span>`}
                                    </div>
                                    <div class="detail-item">
                                        <label>Plan:</label>
                                        ${isEdit ? `
                                            <select id="edit-plan">
                                                <option value="Starter" ${customer.plan === 'Starter' ? 'selected' : ''}>Starter</option>
                                                <option value="Professional" ${customer.plan === 'Professional' ? 'selected' : ''}>Professional</option>
                                                <option value="Enterprise" ${customer.plan === 'Enterprise' ? 'selected' : ''}>Enterprise</option>
                                            </select>
                                        ` : `<span class="plan-badge ${customer.plan.toLowerCase()}">${customer.plan}</span>`}
                                    </div>
                                    <div class="detail-item">
                                        <label>Status:</label>
                                        ${isEdit ? `
                                            <select id="edit-status">
                                                <option value="Active" ${customer.status === 'Active' ? 'selected' : ''}>Active</option>
                                                <option value="Suspended" ${customer.status === 'Suspended' ? 'selected' : ''}>Suspended</option>
                                                <option value="Pending" ${customer.status === 'Pending' ? 'selected' : ''}>Pending</option>
                                            </select>
                                        ` : `<span class="status-badge ${customer.status.toLowerCase()}">${customer.status}</span>`}
                                    </div>
                                    <div class="detail-item">
                                        <label>Join Date:</label>
                                        <span>${customer.joinDate}</span>
                                    </div>
                                </div>
                                
                                <div class="detail-section">
                                    <h3>Usage Analytics</h3>
                                    <div class="detail-item">
                                        <label>API Calls (This Month):</label>
                                        <span>${customer.apiCalls?.toLocaleString() || '0'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>Storage Used:</label>
                                        <span>${customer.storageUsed || '0 GB'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>Token Limit:</label>
                                        ${isEdit ? `<input type="number" value="${customer.tokenLimit || 10000}" id="edit-token-limit">` : `<span>${customer.tokenLimit?.toLocaleString() || '10,000'}</span>`}
                                    </div>
                                    <div class="detail-item">
                                        <label>Tokens Used:</label>
                                        <span>${customer.tokensUsed?.toLocaleString() || '0'}</span>
                                    </div>
                                </div>
                                
                                <div class="detail-section">
                                    <h3>Billing Information</h3>
                                    <div class="detail-item">
                                        <label>Monthly Revenue:</label>
                                        <span>$${customer.revenue || '0'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>Last Payment:</label>
                                        <span>${customer.lastPayment || 'N/A'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>Next Billing:</label>
                                        <span>${customer.nextBilling || 'N/A'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>Payment Method:</label>
                                        <span>${customer.paymentMethod || 'Credit Card'}</span>
                                    </div>
                                </div>
                                
                                <div class="detail-section">
                                    <h3>Connected Apps</h3>
                                    <div class="detail-item">
                                        <label>Active Integrations:</label>
                                        <span>${customer.integrations || 'Shopify, Stripe'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>Last Activity:</label>
                                        <span>${customer.lastActivity || '2 hours ago'}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            ${isEdit ? `
                                <button class="btn-action primary" onclick="saveCustomerChanges(${customer.id})">Save Changes</button>
                                <button class="btn-action" onclick="closeCustomerModal()">Cancel</button>
                            ` : `
                                <button class="btn-action primary" onclick="editCustomer(${customer.id}); closeCustomerModal();">Edit Customer</button>
                                <button class="btn-action" onclick="closeCustomerModal()">Close</button>
                            `}
                        </div>
                    </div>
                </div>
            `;
            
            // Add modal to page
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Show modal with animation
            setTimeout(() => {
                document.getElementById('customerModal').classList.add('show');
            }, 10);
        }

        function closeCustomerModal(event) {
            if (event && event.target !== event.currentTarget) return;
            
            const modal = document.getElementById('customerModal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }

        function saveCustomerChanges(customerId) {
            const customer = customers.find(c => c.id === customerId);
            
            // Get form values
            const name = document.getElementById('edit-name')?.value;
            const email = document.getElementById('edit-email')?.value;
            const plan = document.getElementById('edit-plan')?.value;
            const status = document.getElementById('edit-status')?.value;
            const tokenLimit = document.getElementById('edit-token-limit')?.value;
            
            // Update customer object
            if (name) customer.name = name;
            if (email) customer.email = email;
            if (plan) customer.plan = plan;
            if (status) customer.status = status;
            if (tokenLimit) customer.tokenLimit = parseInt(tokenLimit);
            
            // Show success message
            alert(`Customer ${customer.name} has been updated successfully!`);
            
            // Close modal and refresh customer list
            closeCustomerModal();
            renderCustomers();
        }

        function suspendCustomer(customerId) {
            const customer = customers.find(c => c.id === customerId);
            if (confirm(`Are you sure you want to suspend ${customer.name}?\n\nThis will:\nâ€¢ Disable their account access\nâ€¢ Stop all AI service processing\nâ€¢ Pause billing\nâ€¢ Send suspension notification`)) {
                alert(`${customer.name} has been suspended.`);
                // Update customer status
                customer.status = 'inactive';
                renderCustomers();
            }
        }

        function changePage(direction) {
            // Pagination logic would go here
            alert('Pagination functionality would be implemented here');
        }

        // Section Management
        function showSection(sectionName) {
            // Hide all sections
            const sections = ['customers', 'analytics', 'security', 'compliance', 'billing', 'settings'];
            sections.forEach(section => {
                const element = document.getElementById(`${section}-section`);
                if (element) {
                    element.style.display = 'none';
                }
            });

            // Show selected section
            const targetSection = document.getElementById(`${sectionName}-section`);
            if (targetSection) {
                targetSection.style.display = 'block';
            }

            // Update navigation active state
            document.querySelectorAll('.admin-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update page title and subtitle
            const titles = {
                customers: {
                    title: 'Customer Management',
                    subtitle: 'Manage customer accounts, subscriptions, and usage across the VARAi platform'
                },
                analytics: {
                    title: 'Platform Analytics & Usage Reports',
                    subtitle: 'Monitor platform performance, usage metrics, and customer engagement'
                },
                security: {
                    title: 'Security Reports & Monitoring',
                    subtitle: 'Real-time security monitoring, threat detection, and incident response'
                },
                compliance: {
                    title: 'SOC2 & HIPAA Compliance Reports',
                    subtitle: 'Compliance status, audit reports, and regulatory documentation'
                },
                billing: {
                    title: 'Billing & Revenue Management',
                    subtitle: 'Revenue tracking, billing management, and financial reporting'
                },
                settings: {
                    title: 'Platform Settings',
                    subtitle: 'System configuration, security settings, and administrative controls'
                }
            };

            if (titles[sectionName]) {
                document.querySelector('.admin-title').textContent = titles[sectionName].title;
                document.querySelector('.admin-subtitle').textContent = titles[sectionName].subtitle;
            }

            // Initialize section-specific functionality
            if (sectionName === 'analytics') {
                initializeAnalytics();
            } else if (sectionName === 'security') {
                initializeSecurity();
            }
        }

        // Analytics Functions
        function initializeAnalytics() {
            // Simple chart simulation using canvas
            const canvas = document.getElementById('apiUsageChart');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw simple line chart
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                const data = [20, 35, 25, 45, 30, 55, 40, 60, 45, 70];
                const stepX = canvas.width / (data.length - 1);
                const maxY = Math.max(...data);
                
                data.forEach((value, index) => {
                    const x = index * stepX;
                    const y = canvas.height - (value / maxY) * canvas.height;
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                
                ctx.stroke();
            }
        }

        function exportAnalytics() {
            alert('Analytics report would be exported as PDF/CSV with:\n\nâ€¢ Platform usage metrics\nâ€¢ Customer engagement data\nâ€¢ Performance analytics\nâ€¢ Integration statistics\nâ€¢ Revenue attribution');
        }

        // Security Functions
        function initializeSecurity() {
            // Security monitoring would be initialized here
            console.log('Security monitoring initialized');
        }

        // Security functions moved to admin-portal.js for proper API integration
        
        function exportSecurityReport() {
            // This function is now handled by admin-portal.js
            if (window.adminPortal) {
                window.adminPortal.exportReport('security');
            } else {
                alert('Security report would be exported with:\n\nâ€¢ Threat analysis\nâ€¢ Incident timeline\nâ€¢ Vulnerability assessment\nâ€¢ Compliance status\nâ€¢ Remediation recommendations');
            }
        }

        // Compliance Functions
        function generateComplianceReport() {
            const complianceType = document.getElementById('complianceType').value;
            alert(`Generating ${complianceType.toUpperCase()} compliance report...\n\nThis would include:\nâ€¢ Control assessments\nâ€¢ Audit evidence\nâ€¢ Risk analysis\nâ€¢ Remediation plans\nâ€¢ Certification status`);
        }

        function downloadReport(reportType) {
            alert(`Downloading ${reportType} report...\n\nThis would provide:\nâ€¢ Official audit documentation\nâ€¢ Compliance certificates\nâ€¢ Assessment results\nâ€¢ Remediation tracking\nâ€¢ Executive summary`);
        }

        // Billing Functions
        function exportBillingReport() {
            alert('Billing report would be exported with:\n\nâ€¢ Revenue breakdown\nâ€¢ Customer billing details\nâ€¢ Usage analytics\nâ€¢ Payment status\nâ€¢ Forecasting data');
        }

        function viewBilling(customerId) {
            alert(`Billing Details (Customer ID: ${customerId})\n\nThis would show:\nâ€¢ Invoice history\nâ€¢ Payment methods\nâ€¢ Usage breakdown\nâ€¢ Billing adjustments\nâ€¢ Payment schedule`);
        }

        // Event listeners
        document.getElementById('customerSearch').addEventListener('input', filterCustomers);
        document.getElementById('statusFilter').addEventListener('change', filterCustomers);
        document.getElementById('planFilter').addEventListener('change', filterCustomers);

        // Initialize
        renderCustomers();
        
        // Initialize charts and monitoring
        setTimeout(() => {
            initializeAnalytics();
        }, 100);
    </script>
    
    <!-- Admin Portal API Integration -->
    <script src="../js/admin-portal.js"></script>
</body>
</html>